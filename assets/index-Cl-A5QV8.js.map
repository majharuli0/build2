{"version":3,"file":"index-Cl-A5QV8.js","sources":["../../src/utils/throttle.js","../../src/Pages/SupportUserDetail/index.jsx"],"sourcesContent":["let timer; let\r\n    flag\r\n/**\r\n * 节流原理：在一定时间内，只能触发一次\r\n *\r\n * @param {Function} func 要执行的回调函数\r\n * @param {Number} wait 延时的时间\r\n * @param {Boolean} immediate 是否立即执行\r\n * @return null\r\n */\r\nfunction throttle(func, wait = 500, immediate = true) {\r\n    if (immediate) {\r\n        if (!flag) {\r\n            flag = true\r\n            // 如果是立即执行，则在wait毫秒内开始时执行\r\n      \r\n            typeof func === 'function' && func()\r\n            timer = setTimeout(() => {\r\n                flag = false\r\n            }, wait)\r\n        }\r\n    } else if (!flag) {\r\n        flag = true\r\n        // 如果是非立即执行，则在wait毫秒内的结束处执行\r\n        timer = setTimeout(() => {\r\n            flag = false\r\n            typeof func === 'function' && func()\r\n        }, wait)\r\n    }\r\n}\r\nexport default throttle\r\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\r\nimport { Space, Table, Tag, Modal } from \"antd\";\r\nimport { useroverViewCount } from \"@/api/AdminDashboard\";\r\nimport TabMenus from \"@/Components/TabMenus\";\r\nimport TimeSelection from \"@/Components/TimeSelection\";\r\nimport ls from \"store2\";\r\nimport AddIcon from \"@/Components/AddIcon\";\r\nimport Sort from \"../../Shared/sort/Sort\";\r\nimport { SidebarContext } from \"@/Context/CustomContext\";\r\nimport CustomButton from \"../../Shared/button/CustomButton\";\r\nimport SearchInput from \"../../Shared/Search/SearchInput\";\r\nimport AdminSupportAgentTable from \"@/Components/PubTable/AdminSupportAgentTable\";\r\n\r\nimport AdminFiled from \"@/Shared/AdminFiled/AdminFiled\";\r\n// import AdminSupportAgentTableAction from '@/Components/Admin/AdminSupportAgent/AdminSupportAgentTableAction';\r\nimport AdminSupportAgentTableAction from \"@/Components/PubTable/AdminSupportAgentTableAction\";\r\nimport { getUserPage } from \"@/api/AdminUser\";\r\nimport CreateAdminSupportAgent from \"@/Components/PubTable/CreateAndEditUsers\";\r\nimport * as SidebarContext1 from \"@/Context/CustomUsertable\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport throttle from \"@/utils/throttle\";\r\n\r\nconst AdminDashboard = () => {\r\n  const params = useParams();\r\n  let item = useLocation();\r\n  const [title, setTitle] = useState(\"Dashboard\");\r\n  const { role } = useContext(SidebarContext);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"Support Agents\");\r\n  const [menuName, setMenuName] = useState(\"[Nursing Home]’s Support Agents\");\r\n  const [btnName, setBtnName] = useState(\"Add New Support Agent\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [selected, setSelected] = useState(\"\");\r\n  const [modalOPen, setModalOpen] = useState(false);\r\n  const [page, SetPage] = useState({\r\n    current: 1,\r\n    size: 10,\r\n  });\r\n  const [menus, setMenus] = useState([\r\n    {\r\n      text: \"Support Agents\",\r\n      bo: true,\r\n      warring: false,\r\n    },\r\n  ]);\r\n  const [changeParams, setChangeParams] = useState({});\r\n  const [totle, SetTotle] = useState(0);\r\n  let [columns, setColumns] = useState([\r\n    {\r\n      title: \"Nursing Home\",\r\n      key: \"id\",\r\n\r\n      render: (row) => (\r\n        <button>\r\n          <AdminFiled data={row} />\r\n        </button>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Contact\",\r\n\r\n      render: (row) => (\r\n        <button>\r\n          <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary\">\r\n            {row.contactNumber}\r\n          </span>\r\n        </button>\r\n      ),\r\n    },\r\n\r\n    {\r\n      title: \"\",\r\n      key: \"id\",\r\n      width: 100,\r\n      render: (row) => (\r\n        // <CustomButton  >Pay now</CustomButton>\r\n        <AdminSupportAgentTableAction\r\n          getlist={() => getList(query)}\r\n          data={row}\r\n        />\r\n      ),\r\n    },\r\n  ]);\r\n  const data = [\"Time\", \"Name\"];\r\n  const [statistics, SetStatistics] = useState({\r\n    nursingHomes: 0,\r\n    elderlies: 0,\r\n    devicesConnected: 0,\r\n    monthlyRevenue: 0,\r\n  });\r\n  const [query, setQuey] = useState({\r\n    order: \"1\",\r\n    orderType: \"time\",\r\n    name: \"\",\r\n  });\r\n  const [list, SetList] = useState([]);\r\n  const handelOpenModal = () => {\r\n    setModalOpen(true);\r\n  };\r\n  const [user, SetUser] = useState(ls.get(\"user\"));\r\n\r\n  const HandleTabText = (e) => {\r\n    setActiveTab(e);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const init = () => {\r\n    let user = ls.get(\"user\");\r\n    let row = new URLSearchParams(item.search);\r\n    let query1 = { ...query };\r\n    let name = row.get(\"name\");\r\n    let id = row.get(\"id\");\r\n\r\n    setTitle(\"User\");\r\n\r\n    query1[name] = id;\r\n    query1.role = \"Support Agent\";\r\n    if (name == \"salesAgentId\") {\r\n      setChangeParams({\r\n        nursingHomeId: id,\r\n        salesAgentId: params.id,\r\n      });\r\n    }\r\n    if (name == \"distributorId\") {\r\n      setChangeParams({\r\n        nursingHomeId: id,\r\n        distributorId: params.id,\r\n      });\r\n    }\r\n    let role1 = role;\r\n    if (!role1) {\r\n      role1 = user.role;\r\n    }\r\n    setQuey(query1);\r\n    SetPage({\r\n      current: 1,\r\n      size: 10,\r\n    });\r\n  };\r\n  const getList = (query) => {\r\n    if (!query.role) return;\r\n    throttle(() => {\r\n      getUserPage({\r\n        ...query,\r\n        ...page,\r\n      }).then((res) => {\r\n        SetTotle(res.data.total);\r\n        SetList(res?.data?.records);\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n  useEffect(() => {\r\n    getList(query);\r\n  }, [page]);\r\n  useEffect(() => {\r\n    if (selected && query.orderType != selected) {\r\n      setQuey({\r\n        ...query,\r\n        ...{\r\n          orderType: selected.toLowerCase(),\r\n          order: selected === \"Time\" ? \"1\" : \"0\",\r\n        },\r\n      });\r\n      SetPage({ ...page, current: 1 });\r\n    }\r\n  }, [selected]);\r\n  useEffect(() => {\r\n    SetPage({ ...page, current: 1 });\r\n  }, [query.order]);\r\n  const handBlurchange = () => {\r\n    setQuey({ ...query, name: search.trim() });\r\n    SetPage({ ...page, current: 1 });\r\n  };\r\n\r\n  return (\r\n    <div className=\"pl-[20px] pr-[50px]\">\r\n      <div className=\"h-[100px] flex items-center justify-between\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\" text-[28px] font-semibold font-cblock \">{title}</div>\r\n        </div>\r\n        <div className=\"h-[40px] pl-[20px] pr-[20px]  rounded-[20px] bg-cblock   flex items-center \">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"14\"\r\n            height=\"14\"\r\n            viewBox=\"0 0 14 14\"\r\n            fill=\"none\"\r\n          >\r\n            <path\r\n              d=\"M8.65073 2.31039L11.4807 5.14035L4.31724 12.3038L1.48886 9.47387L8.65073 2.31039ZM13.6281 1.62787L12.3661 0.365808C11.8783 -0.121936 11.0863 -0.121936 10.5969 0.365808L9.38799 1.57474L12.218 4.40473L13.6281 2.99457C14.0064 2.61625 14.0064 2.00617 13.6281 1.62787ZM0.00787518 13.4516C-0.0436269 13.6834 0.165643 13.8911 0.397455 13.8347L3.551 13.0701L0.722618 10.2401L0.00787518 13.4516Z\"\r\n              fill=\"white\"\r\n            />\r\n          </svg>\r\n          <div className=\"pl-[20px]  text-white text-[14px] font-semibold  \">\r\n            Edit Nursing Home\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"pt-[20px] pb-[10px] flex\">\r\n        <TabMenus\r\n          menus={menus}\r\n          activeTab={activeTab}\r\n          setActiveTab={setActiveTab}\r\n        />\r\n      </div>\r\n      <div className=\"\">\r\n        {(activeTab == \"Support Agents\" || activeTab == \"Nursing Homes\") && (\r\n          <div>\r\n            <div className=\" bg-white rounded-2xl\">\r\n              <div className=\" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2\">\r\n                <div className=\" flex items-center justify-between w-full\">\r\n                  <h2 className=\" text-2xl font-bold text-text-primary\">\r\n                    {menuName}\r\n                  </h2>\r\n                </div>\r\n                <div className=\" flex items-center justify-end gap-5 w-full\">\r\n                  {/* =====Search sort and add admin button===== */}\r\n                  <SearchInput\r\n                    search={search}\r\n                    setSearch={setSearch}\r\n                    handBlurchange={handBlurchange}\r\n                    placeholder=\"Search Nursing Home\"\r\n                  />\r\n                  <Sort\r\n                    query={query}\r\n                    setQuey={setQuey}\r\n                    selected={selected}\r\n                    setSelected={setSelected}\r\n                    data={data}\r\n                  />\r\n                  <CustomButton\r\n                    onClick={() => handelOpenModal()}\r\n                    className={\" hidden lg:flex min-w-[80px]\"}\r\n                  >\r\n                    <AddIcon /> {btnName}\r\n                  </CustomButton>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\" grid grid-cols-1\">\r\n                <SidebarContext1.SidebarContext.Provider\r\n                  value={{ getlist: getList, query, totle, page, SetPage }}\r\n                >\r\n                  <AdminSupportAgentTable tableData={list} columns={columns} />\r\n                </SidebarContext1.SidebarContext.Provider>\r\n              </div>\r\n            </div>\r\n            <CreateAdminSupportAgent\r\n              item={{}}\r\n              changeParams={changeParams}\r\n              getlist={() => getList(query)}\r\n              role={query.role}\r\n              modalOPen={modalOPen}\r\n              setModalOpen={setModalOpen}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"names":["flag","throttle","func","wait","immediate","AdminDashboard","params","useParams","item","useLocation","title","setTitle","useState","role","useContext","SidebarContext","isModalOpen","setIsModalOpen","activeTab","setActiveTab","menuName","setMenuName","btnName","setBtnName","search","setSearch","selected","setSelected","modalOPen","setModalOpen","page","SetPage","menus","setMenus","changeParams","setChangeParams","totle","SetTotle","columns","setColumns","row","jsx","AdminFiled","AdminSupportAgentTableAction","getList","query","data","statistics","SetStatistics","setQuey","list","SetList","handelOpenModal","user","SetUser","ls","init","query1","name","id","role1","getUserPage","res","_a","useEffect","handBlurchange","jsxs","TabMenus","SearchInput","Sort","CustomButton","AddIcon","SidebarContext1.SidebarContext","AdminSupportAgentTable","CreateAdminSupportAgent"],"mappings":"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"}