{"version":3,"file":"PieChart-CHEcFfT3.js","sources":["../../src/Components/GraphAndChart/PieChart.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport ReactECharts from \"echarts-for-react\";\nimport { formatTimeToHoursAndMinutes } from \"@/utils/helper\";\n\n// Sleep Score Pie Chart Component\nexport default function SleepScorePieChart({\n  sleepData = [],\n  sleepScore = \"\",\n}) {\n  const chartRef = useRef(null);\n\n  // Filter to include only light and deep sleep\n  const filterSleepData = (data) =>\n    data.filter(\n      (item) =>\n        item.status === \"0\" || item.status === \"1\" || item.status === \"7\"\n    );\n\n  // Calculate total sleep in hours and minutes\n  const calculateTotalSleep = (data) => {\n    const filteredData = filterSleepData(data);\n    const totalMinutes = filteredData.reduce(\n      (sum, item) => sum + Number(item.value),\n      0\n    );\n    const hours = Math.floor(totalMinutes / 60);\n    const minutes = totalMinutes % 60;\n    return { hours, minutes };\n  };\n\n  const totalSleep = calculateTotalSleep(sleepData);\n\n  // Map and translate data for the pie chart\n  const statusMap = {\n    0: \"Deep Sleep\",\n    1: \"Light Sleep\",\n    7: \"REM\",\n  };\n\n  const filteredData = filterSleepData(sleepData);\n  const formattedData = filteredData.map((item) => ({\n    name: statusMap[item.status],\n    value: item.value,\n  }));\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (chartRef.current) {\n        chartRef.current.getEchartsInstance().resize();\n      }\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  const option = {\n    tooltip: {\n      trigger: \"item\",\n      formatter: (params) => {\n        const sleepDuration = formatTimeToHoursAndMinutes(params.value); // Get the sleep duration for each section\n        return `${params.name}: ${sleepDuration} (${params.percent}%)`;\n      },\n    },\n    legend: {\n      show: true,\n      orient: \"horizontal\",\n      bottom: 0,\n      left: \"center\",\n    },\n    series: [\n      {\n        name: \"Sleep Stages\",\n        type: \"pie\",\n        radius: [\"40%\", \"70%\"],\n        avoidLabelOverlap: false,\n        data: formattedData, // Use filtered data\n        emphasis: {\n          itemStyle: {\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowColor: \"rgba(0, 0, 0, 0.5)\",\n          },\n        },\n        itemStyle: {\n          borderRadius: 10,\n          borderColor: \"#fff\",\n          borderWidth: 2,\n        },\n        label: {\n          show: true,\n          position: \"center\",\n          formatter: () =>\n            `{c|${totalSleep.hours}h ${totalSleep.minutes}m}\\n{a|Total Duration}`,\n          rich: {\n            a: {\n              fontSize: 12,\n              fontWeight: \"normal\",\n              color: \"#999\",\n              marginTop: 5,\n            },\n            c: {\n              fontSize: 30,\n              fontWeight: \"bold\",\n              color: \"#000\",\n              padding: [10, 0, 0, 0],\n            },\n          },\n        },\n        labelLine: {\n          show: false,\n        },\n      },\n    ],\n  };\n\n  return (\n    <ReactECharts\n      ref={chartRef}\n      option={option}\n      style={{ height: 380, width: \"100%\" }}\n    />\n  );\n}\n"],"names":["SleepScorePieChart","sleepData","sleepScore","chartRef","useRef","filterSleepData","data","item","totalSleep","totalMinutes","sum","hours","minutes","statusMap","formattedData","useEffect","handleResize","option","params","sleepDuration","formatTimeToHoursAndMinutes","jsx","ReactECharts"],"mappings":"uYAKA,SAAwBA,EAAmB,CACzC,UAAAC,EAAY,CAAC,EACb,WAAAC,EAAa,EACf,EAAG,CACK,MAAAC,EAAWC,SAAO,IAAI,EAGtBC,EAAmBC,GACvBA,EAAK,OACFC,GACCA,EAAK,SAAW,KAAOA,EAAK,SAAW,KAAOA,EAAK,SAAW,GAAA,EAe9DC,GAXuBF,GAAS,CAEpC,MAAMG,EADeJ,EAAgBC,CAAI,EACP,OAChC,CAACI,EAAKH,IAASG,EAAM,OAAOH,EAAK,KAAK,EACtC,CAAA,EAEII,EAAQ,KAAK,MAAMF,EAAe,EAAE,EACpCG,EAAUH,EAAe,GACxB,MAAA,CAAE,MAAAE,EAAO,QAAAC,EAAQ,GAGaX,CAAS,EAG1CY,EAAY,CAChB,EAAG,aACH,EAAG,cACH,EAAG,KAAA,EAICC,EADeT,EAAgBJ,CAAS,EACX,IAAKM,IAAU,CAChD,KAAMM,EAAUN,EAAK,MAAM,EAC3B,MAAOA,EAAK,KACZ,EAAA,EAEFQ,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAe,IAAM,CACrBb,EAAS,SACFA,EAAA,QAAQ,mBAAmB,EAAE,OAAO,CAC/C,EAGK,cAAA,iBAAiB,SAAUa,CAAY,EACvC,IAAM,CACJ,OAAA,oBAAoB,SAAUA,CAAY,CAAA,CAErD,EAAG,CAAE,CAAA,EAEL,MAAMC,EAAS,CACb,QAAS,CACP,QAAS,OACT,UAAYC,GAAW,CACf,MAAAC,EAAgBC,EAA4BF,EAAO,KAAK,EAC9D,MAAO,GAAGA,EAAO,IAAI,KAAKC,CAAa,KAAKD,EAAO,OAAO,IAC5D,CACF,EACA,OAAQ,CACN,KAAM,GACN,OAAQ,aACR,OAAQ,EACR,KAAM,QACR,EACA,OAAQ,CACN,CACE,KAAM,eACN,KAAM,MACN,OAAQ,CAAC,MAAO,KAAK,EACrB,kBAAmB,GACnB,KAAMJ,EACN,SAAU,CACR,UAAW,CACT,WAAY,GACZ,cAAe,EACf,YAAa,oBACf,CACF,EACA,UAAW,CACT,aAAc,GACd,YAAa,OACb,YAAa,CACf,EACA,MAAO,CACL,KAAM,GACN,SAAU,SACV,UAAW,IACT,MAAMN,EAAW,KAAK,KAAKA,EAAW,OAAO;AAAA,oBAC/C,KAAM,CACJ,EAAG,CACD,SAAU,GACV,WAAY,SACZ,MAAO,OACP,UAAW,CACb,EACA,EAAG,CACD,SAAU,GACV,WAAY,OACZ,MAAO,OACP,QAAS,CAAC,GAAI,EAAG,EAAG,CAAC,CACvB,CACF,CACF,EACA,UAAW,CACT,KAAM,EACR,CACF,CACF,CAAA,EAIA,OAAAa,EAAA,IAACC,EAAA,CACC,IAAKnB,EACL,OAAAc,EACA,MAAO,CAAE,OAAQ,IAAK,MAAO,MAAO,CAAA,CAAA,CAG1C"}