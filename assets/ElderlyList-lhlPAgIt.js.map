{"version":3,"file":"ElderlyList-lhlPAgIt.js","sources":["../../src/Pages/Elderlies/Utiles/utiles2.jsx","../../src/Pages/Elderlies/ElderlyList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Elderly from \"@/Components/NameCol/Elderly\";\r\nimport { LuNavigation } from \"react-icons/lu\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ls from \"store2\";\r\nexport default function useElderlyTableColumns(role) {\r\n  const navigate = useNavigate(); // Initialize the navigate function\r\n\r\n  const randomId = Math.floor(Math.random() * 1000000);\r\n  const handleViewClick = (row) => {\r\n    window.scrollTo(0, 0);\r\n    navigate(`/supporter/elderlies/elderly-profile/${row?._id}`); // Navigate to the profile page with the ID\r\n  };\r\n  const elderlyTableColsMapping = {\r\n    support_agent: [\r\n      \"elderlyName\",\r\n      \"activeAlert\",\r\n      \"allergies\",\r\n      \"diseases\",\r\n      \"medications\",\r\n      \"viewProfile\",\r\n    ],\r\n    nurse: [\r\n      \"elderlyName\",\r\n      \"activeAlert\",\r\n      \"allergies\",\r\n      \"diseases\",\r\n      \"medications\",\r\n      // \"viewOnMap\",\r\n      \"viewProfile\",\r\n    ],\r\n    end_user: [\r\n      \"elderlyName\",\r\n      \"activeAlert\",\r\n      \"allergies\",\r\n      \"diseases\",\r\n      \"medications\",\r\n      \"viewProfile\",\r\n    ],\r\n  };\r\n  const elderlyTableColumns = {\r\n    elderlyName: {\r\n      title: \"User Name\",\r\n      render: (row) => (\r\n        <Elderly onClick={() => handleViewClick(row)} data={row} />\r\n      ),\r\n    },\r\n    roomName: {\r\n      title: \"Room Name\",\r\n      dataIndex: \"roomName\",\r\n      render: (text) => <span>{text}</span>,\r\n    },\r\n    activeAlert: {\r\n      title: \"Activity Notifications\",\r\n      dataIndex: \"unresolved_alarm_count\",\r\n      render: (text) => <span>{text}</span>,\r\n    },\r\n    address: {\r\n      title: \"Address\",\r\n      width: \"230px\",\r\n      render: (row) => (\r\n        <span className=\"!w-[230px] text-nowrap\">{row.address}</span>\r\n      ),\r\n    },\r\n    allergies: {\r\n      title: \"Environmental Sensitivities\",\r\n      render: (row) => (\r\n        <span>\r\n          {row.comments\r\n            ?.filter((comment) => comment.category === \"Allergy\")\r\n            .map((comment) => comment.comment)\r\n            .join(\", \")}\r\n        </span>\r\n      ),\r\n    },\r\n    diseases: {\r\n      title: \"Sensitivity Factors\",\r\n      render: (row) => <span>{row.diseases?.map((d) => d).join(\", \")}</span>,\r\n    },\r\n    medications: {\r\n      title: \"Daily Routine\",\r\n      render: (row) => (\r\n        <span>{row.medications?.map((d) => d.name).join(\", \")}</span>\r\n      ),\r\n    },\r\n    viewOnMap: {\r\n      title: \"View On Map\",\r\n      render: (row) => (\r\n        <span className=\"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <a\r\n              href={`https://www.google.com/maps?q=${row.latitude},${row.longitude}`}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-base font-medium !text-blue-500\"\r\n            >\r\n              View on Map\r\n            </a>\r\n            <LuNavigation size={18} className=\"text-blue-500\" />\r\n          </div>\r\n        </span>\r\n      ),\r\n    },\r\n    viewProfile: {\r\n      title: \"View Profile\",\r\n      render: (row) => (\r\n        <span className=\"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <a\r\n              onClick={() => handleViewClick(row)}\r\n              className=\"text-base font-medium !text-blue-500\"\r\n            >\r\n              View\r\n            </a>\r\n            {/* <LuNavigation size={18} className=\"text-blue-500\" /> */}\r\n          </div>\r\n        </span>\r\n      ),\r\n    },\r\n  };\r\n\r\n  const [elderlyTableColumn, setElderlyTableColumns] = useState([]);\r\n  useEffect(() => {\r\n    console.log(\"Current role:\");\r\n    console.log(\"Available roles:\", Object.keys(elderlyTableColsMapping));\r\n    if (role === \"support_agent\") {\r\n      const cols = elderlyTableColsMapping.support_agent.map((col) => {\r\n        return elderlyTableColumns[col];\r\n      });\r\n      setElderlyTableColumns(cols);\r\n    } else if (role === \"nurse\") {\r\n      const cols = elderlyTableColsMapping.nurse.map((col) => {\r\n        return elderlyTableColumns[col];\r\n      });\r\n      setElderlyTableColumns(cols);\r\n    } else if (role === \"end_user\") {\r\n      const cols = elderlyTableColsMapping.end_user.map((col) => {\r\n        return elderlyTableColumns[col];\r\n      });\r\n      setElderlyTableColumns(cols);\r\n    } else {\r\n      setElderlyTableColumns([]);\r\n    }\r\n  }, []);\r\n  return elderlyTableColumn;\r\n}\r\n\r\nexport { useElderlyTableColumns };\r\n","import React, { useEffect, useState, useCallback } from \"react\";\r\nimport CustomTable from \"@/Shared/Table/CustomTable\";\r\nimport { useElderlyTableColumns } from \"./Utiles/utiles2\";\r\nimport { SidebarContext } from \"@/Context/CustomUsertable\";\r\nimport { Segmented, ConfigProvider, Select } from \"antd\";\r\nimport { getElderlies } from \"@/api/elderly\";\r\nimport SearchInput from \"@/Shared/Search/SearchInput\";\r\n\r\nexport default function ElderlyList() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [elderlies, setElderlies] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const columns = useElderlyTableColumns(\"support_agent\");\r\n  const [elderliesQuery, setElderliesQuery] = useState({});\r\n  const getElderlyList = useCallback(() => {\r\n    setLoading(true);\r\n    getElderlies({ ...elderliesQuery, name: search })\r\n      .then((res) => {\r\n        setElderlies(res);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  }, [elderliesQuery, search]);\r\n  useEffect(() => {\r\n    getElderlyList();\r\n  }, [getElderlyList]);\r\n  function hnadleChangeElderlyFilter(data) {\r\n    switch (data) {\r\n      case \"diseases\":\r\n        return setElderliesQuery({ diseases: true });\r\n      case \"comments\":\r\n        return setElderliesQuery({ comments: true });\r\n\r\n      case \"medications\":\r\n        return setElderliesQuery({ medications: true });\r\n      default:\r\n        return setElderliesQuery({});\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <div\r\n        id=\"Elderlies\"\r\n        className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-8\"\r\n      >\r\n        <div id=\"Elderlies_Header\" className=\"w-full flex justify-between\">\r\n          <h1 className=\"text-[24px] font-bold\">Users</h1>\r\n          <div className=\"flex gap-4\">\r\n            <ConfigProvider\r\n              theme={{\r\n                token: {\r\n                  fontFamily: \"Baloo2\",\r\n                  colorPrimary: \"#8086AC\",\r\n                  colorLinkActive: \"#8086AC\",\r\n                  colorLinkHover: \"#8086AC\",\r\n                  colorLink: \"#8086AC\",\r\n                },\r\n              }}\r\n            >\r\n              <Select\r\n                size=\"large\"\r\n                options={elderlyListSelectOptions}\r\n                defaultValue={elderlyListSelectOptions[0].value}\r\n                onChange={(value) => hnadleChangeElderlyFilter(value)}\r\n                className=\"min-w-[160px]\"\r\n              />\r\n            </ConfigProvider>\r\n            <SearchInput\r\n              search={search}\r\n              setSearch={setSearch}\r\n              placeholder=\"Search Users\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <SidebarContext.Provider\r\n          value={{\r\n            total: elderlies?.data?.length,\r\n            page: 1,\r\n            SetPage: () => {},\r\n          }}\r\n        >\r\n          <CustomTable\r\n            loading={loading}\r\n            columns={columns}\r\n            tableData={elderlies?.data}\r\n          />\r\n        </SidebarContext.Provider>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport const elderlyListSegmentOptions = [\r\n  \"All Elderlies\",\r\n  \"With Alerts\",\r\n  \"With Diseases\",\r\n  \"With Allergies\",\r\n  \"Taking Medications\",\r\n];\r\nexport const elderlyListSelectOptions = [\r\n  { label: \"All Users\", value: \"all\" },\r\n  { label: \"With Sensitivity Factors\", value: \"diseases\" },\r\n  { label: \"With Comments\", value: \"comments\" },\r\n  { label: \"Taking Daily Routine\", value: \"medications\" },\r\n];\r\n"],"names":["useElderlyTableColumns","role","navigate","useNavigate","handleViewClick","row","elderlyTableColsMapping","elderlyTableColumns","jsx","Elderly","text","_a","comment","d","jsxs","LuNavigation","elderlyTableColumn","setElderlyTableColumns","useState","useEffect","cols","col","ElderlyList","search","setSearch","elderlies","setElderlies","loading","setLoading","columns","elderliesQuery","setElderliesQuery","getElderlyList","useCallback","getElderlies","res","err","hnadleChangeElderlyFilter","data","Fragment","ConfigProvider","Select","elderlyListSelectOptions","value","SearchInput","SidebarContext","CustomTable","elderlyListSegmentOptions"],"mappings":"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"}