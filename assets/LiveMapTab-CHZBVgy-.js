import{r as l,bk as y,bM as g,j as s,T as p,bN as a,bK as C,bL as v,bO as I,bP as _}from"./index-Bi7WHLKx.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},c=new t.Error().stack;c&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[c]="eba20da2-1091-4d95-915c-4dbe92468cdc",t._sentryDebugIdIdentifier="sentry-dbid-eba20da2-1091-4d95-915c-4dbe92468cdc")}catch{}function k({data:t={}}){var f,u,h,b,m,j;const{deviceData:c}=l.useContext(y),o=l.useContext(g),{elderlyDetails:n}=o||{},r=(t==null?void 0:t.device_no)||(n==null?void 0:n.deviceId),[d,w]=l.useState([]);l.useEffect(()=>{var i;const e=((i=c[r])==null?void 0:i.position)||[];w(e)},[c,r]);const x=l.useMemo(()=>{const e=c[r],i=e==null?void 0:e.hbstaticsTimestamp,N=Date.now();return!(e!=null&&e.hbstatics)||!i||(N-i)/1e3>90?null:e.hbstatics},[c[r]]);return s.jsxs("div",{className:"flex gap-2 h-fit",children:[s.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(d==null?void 0:d.length)>0?s.jsx(p,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:d==null?void 0:d.map((e,i)=>s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-2 rounded-full",children:s.jsx(a,{size:14,color:"white"})}),s.jsx("div",{children:s.jsx("p",{className:"text-sm m-0",children:e==null?void 0:e.posture})})]},i)),children:s.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:d==null?void 0:d.map((e,i)=>s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-1 rounded-full border-2 border-white",children:s.jsx(a,{size:16,color:"white"})},i))})}):s.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:s.jsx(a,{size:16,color:"white"})}),s.jsx("span",{className:"font-bold text-lg",children:d?d==null?void 0:d.length:0})]}),(t==null?void 0:t.room_type)==2&&s.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit px-2 py-1",children:[s.jsx("div",{className:"pr-1",children:s.jsx(C,{size:20,color:`${(h=(u=(f=v(x))==null?void 0:f.statusEvents)==null?void 0:u.sleepState)==null?void 0:h.color}`})}),s.jsx("span",{className:"font-semibold text-wrap",children:((j=(m=(b=v(x))==null?void 0:b.statusEvents)==null?void 0:m.sleepState)==null?void 0:j.label)||"--"})]})]})}function z(){var o;const t=l.useContext(g),{elderlyDetails:c}=t||{};return s.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(c==null?void 0:c.rooms)&&((o=c==null?void 0:c.rooms)==null?void 0:o.filter(n=>n.device_no).map((n,r)=>s.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[s.jsx("h1",{className:"text-2xl font-bold",children:n==null?void 0:n.name}),s.jsxs("div",{className:"flex h-full",children:[s.jsx(k,{data:n}),s.jsxs("div",{id:"roomMap",className:"w-fit h-full mt-14 mx-auto",children:[(n==null?void 0:n.mount_type)===2&&s.jsx(I,{roomInfo:n}),(n==null?void 0:n.mount_type)===1&&s.jsx(_,{roomInfo:n})]})]})]},r)))})}export{z as default};
//# sourceMappingURL=LiveMapTab-CHZBVgy-.js.map
