import{a3 as U,V as D,r as l,L as R,u as x,a4 as u,a5 as p,K as t,j as E,a6 as I,a7 as L,a8 as S}from"./index-Rw8Q6r5R.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new s.Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="4f68b88e-c54f-494f-a55d-061f703287e1",s._sentryDebugIdIdentifier="sentry-dbid-4f68b88e-c54f-494f-a55d-061f703287e1")}catch{}function C(){const s=U(),a=D(),{role:h}=a.state||{},[b,y]=l.useState(!0),{setStoreRole:_,setUser:k}=R(),r=x();let n=s.id.split("-");const[T,P]=l.useState(""),d=()=>{let e=t.get("user");const o=L();t.get("rootToken")||(t.set("rootToken",o),t.set("rootRole",e.role))},c=e=>{S(e)},f=l.useCallback(()=>{u({id:n[0]}).then(e=>{var o,g;(o=e==null?void 0:e.data)!=null&&o.role&&m((g=e==null?void 0:e.data)==null?void 0:g.role)}).catch(e=>{console.log(e)})},[]),m=l.useCallback(e=>{if(console.log(T),n.length>=2){p({id:n[0],params:{role:e==="nursing_home"?"nurse":"supports_agent"}}).then(o=>{i({...o.data,sub_role:"elderly"}),d(),c(o.data.access_token)}).catch(o=>{console.log(o)}),u({id:n[0]}).then(o=>{o.data.role!=="nursing_home"&&i({...o.data,sub_role:"elderly"})}).catch(o=>{console.log(o)});return}u({id:s.id}).then(o=>{i(o.data)}).catch(o=>{console.log(o)}),p({id:s.id}).then(o=>{d(),c(o.data.access_token)}).catch(o=>{console.log(o)})},[h,s.id]),w=e=>{e=="super_admin"?r("/support-agent/dashboard/"):e=="supports_agent"?r("/supporter/support-agent/dashboard"):e=="nurse"?r("/supporter/nurse/dashboard"):e=="end_user"?r("/supporter/end-user/dashboard"):e=="elderly"?r(`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`):r("/support-nurnt/dashboard")};function i(e){t.set("user",e),t.set("mainRole",e.role),t.set("role",e.role),_({role:e.role}),k({role:e.role}),setTimeout(()=>{y(!1),w((e==null?void 0:e.sub_role)||(e==null?void 0:e.role))},1500)}if(l.useEffect(()=>{f()},[f]),b)return E.jsx(I,{loaderTitle:"Loading User Profile"})}export{C as default};
//# sourceMappingURL=index-t-B1Juy-.js.map
