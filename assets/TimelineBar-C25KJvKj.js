import{r,S as M,j as n,J as C,E as L}from"./index-Rw8Q6r5R.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},c=new s.Error().stack;c&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[c]="82e1836f-ce32-4316-ac0f-968d909c56e6",s._sentryDebugIdIdentifier="sentry-dbid-82e1836f-ce32-4316-ac0f-968d909c56e6")}catch{}const _=({alarmEvents:s=[],enterBedTime:c,getupAfterTime:x,noDataText:w="No data available to show"})=>{const{sleepEventsType:f,sleepEventsColor:g}=r.useContext(M),o=r.useMemo(()=>s.map(e=>({id:`${e.event_type}-${e.ts}`,name:f[e.event_type],startTime:new Date(e.ts),endTime:new Date(e.ts),color:g[f[e.event_type]]})).filter(e=>e.name),[s,f,g]),m=r.useMemo(()=>[...new Set(o.map(e=>e.name))],[o]),[a,p]=r.useState(()=>m.reduce((e,t)=>(e[t]=!0,e),{}));r.useEffect(()=>{const e=m.filter(t=>!(t in a));e.length>0&&p(t=>({...t,...e.reduce((i,l)=>({...i,[l]:!0}),{})}))},[m,a]);const E=e=>{p(t=>({...t,[e]:!t[e]}))},h=r.useMemo(()=>o.filter(e=>a[e.name]),[o,a]),S=Math.min(...o.map(e=>e.startTime.getTime())),$=Math.max(...o.map(e=>e.endTime.getTime())),j=r.useMemo(()=>h.map((e,t)=>{const i=e.startTime.getTime()===e.endTime.getTime();return{id:t,name:e.name,value:[e.startTime.getTime(),e.endTime.getTime(),i?15:10],itemStyle:{color:e.color}}}),[h]);if(o.length===0)return n.jsx(C,{description:w});const D={tooltip:{trigger:"item",formatter:e=>{const t=h[e.data.id],i=t.startTime.getTime()===t.endTime.getTime(),l=new Date(t.startTime).toLocaleString();if(i)return`${t.name}<br/>Date & Time: ${l}`;{const d=new Date(t.endTime).toLocaleString(),y=t.endTime-t.startTime,u=Math.floor(y/(1e3*60)),b=Math.floor(u/60),T=u%60,v=b>0?`${b} hour(s) ${T} minute(s)`:`${T} minute(s)`;return`<b>${t.name}</b> <br/>Start: ${l}<br/>End: ${d}<br/>Duration: ${v}`}}},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!1},xAxis:{type:"time",boundaryGap:!0,min:S,max:$,splitNumber:5,axisLabel:{formatter:e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),interval:0,margin:5},axisTick:{show:!0,alignWithLabel:!0}},yAxis:{show:!1},series:[{name:"Events",type:"custom",renderItem:(e,t)=>{const i=t.coord([t.value(0),0]),l=t.coord([t.value(1),0]),d=t.size([0,t.value(2)])[1],y=Math.max(l[0]-i[0],5);e.coordSys.height-d,e.dataIndex%5;const u=e.coordSys.height-d+60;return{type:"rect",shape:{x:i[0],y:u,width:y,height:d},style:{fill:t.style().fill,stroke:"#fff",lineWidth:1}}},encode:{x:[0,1]},data:j}],graphic:c&&x?[{type:"text",left:"5%",bottom:"1%",style:{text:`Enter Bed ${c}`,fontSize:12}},{type:"text",right:"5%",bottom:"1%",style:{text:`Getup ${x}`,fontSize:12}}]:[]};return n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 w-full",children:[n.jsx("div",{id:"customLegend",className:"w-full",children:n.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:m.map(e=>n.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>E(e),children:[n.jsx("div",{id:"legendColorShape",className:"size-3 rounded-[4px] border-2",style:{backgroundColor:a[e]?g[e]:"grey",borderColor:a[e]?"transparent":"#ccc"}}),n.jsx("div",{children:e})]},e))})}),n.jsx(L,{option:D,style:{height:200,width:"100%"}})]})};export{_ as default};
//# sourceMappingURL=TimelineBar-C25KJvKj.js.map
