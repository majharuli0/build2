import{r as o,S as C,j as n,K as L,E as I}from"./index-DT7KcFIv.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new s.Error().stack;l&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[l]="fdb591b1-42e6-42ec-ad82-cce9b745d188",s._sentryDebugIdIdentifier="sentry-dbid-fdb591b1-42e6-42ec-ad82-cce9b745d188")}catch{}const k=({alarmEvents:s=[],enterBedTime:l,getupAfterTime:b,noDataText:E="No data available to show"})=>{const{sleepEventsType:d,sleepEventsColor:g}=o.useContext(C),c=o.useMemo(()=>s.map(e=>({id:`${e.event_type}-${e.ts}`,name:d[e.event_type],startTime:new Date(e.ts),endTime:new Date(e.ts),color:g[d[e.event_type]]})).filter(e=>e.name),[s,d,g]),w=[11,12,13,14,15],u=o.useMemo(()=>w.map(e=>d[e]).filter(Boolean),[d]),[r,x]=o.useState(()=>u.reduce((e,t)=>(e[t]=!0,e),{}));o.useEffect(()=>{const e=u.filter(t=>!(t in r));e.length>0&&x(t=>({...t,...e.reduce((i,a)=>({...i,[a]:!0}),{})}))},[u,r]);const S=e=>{x(t=>({...t,[e]:!t[e]}))},h=o.useMemo(()=>c.filter(e=>r[e.name]),[c,r]),$=Math.min(...c.map(e=>e.startTime.getTime())),j=Math.max(...c.map(e=>e.endTime.getTime())),v=o.useMemo(()=>h.map((e,t)=>{const i=e.startTime.getTime()===e.endTime.getTime();return{id:t,name:e.name,value:[e.startTime.getTime(),e.endTime.getTime(),i?15:10],itemStyle:{color:e.color}}}),[h]);if(c.length===0)return n.jsx(L,{description:E});const D={tooltip:{trigger:"item",formatter:e=>{const t=h[e.data.id],i=t.startTime.getTime()===t.endTime.getTime(),a=new Date(t.startTime).toLocaleString();if(i)return`${t.name}<br/>Date & Time: ${a}`;{const m=new Date(t.endTime).toLocaleString(),y=t.endTime-t.startTime,f=Math.floor(y/(1e3*60)),p=Math.floor(f/60),T=f%60,M=p>0?`${p} hour(s) ${T} minute(s)`:`${T} minute(s)`;return`<b>${t.name}</b> <br/>Start: ${a}<br/>End: ${m}<br/>Duration: ${M}`}}},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!1},xAxis:{type:"time",boundaryGap:!0,min:$,max:j,splitNumber:5,axisLabel:{formatter:e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),interval:0,margin:5},axisTick:{show:!0,alignWithLabel:!0}},yAxis:{show:!1},series:[{name:"Events",type:"custom",renderItem:(e,t)=>{const i=t.coord([t.value(0),0]),a=t.coord([t.value(1),0]),m=t.size([0,t.value(2)])[1],y=Math.max(a[0]-i[0],5);e.coordSys.height-m,e.dataIndex%5;const f=e.coordSys.height-m+60;return{type:"rect",shape:{x:i[0],y:f,width:y,height:m},style:{fill:t.style().fill,stroke:"#fff",lineWidth:1}}},encode:{x:[0,1]},data:v}],graphic:l&&b?[{type:"text",left:"5%",bottom:"1%",style:{text:`Enter Bed ${l}`,fontSize:12}},{type:"text",right:"5%",bottom:"1%",style:{text:`Getup ${b}`,fontSize:12}}]:[]};return n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 w-full",children:[n.jsx("div",{id:"customLegend",className:"w-full",children:n.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:u.map(e=>n.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>S(e),children:[n.jsx("div",{id:"legendColorShape",className:"size-3 rounded-[4px] border-2",style:{backgroundColor:r[e]?g[e]:"grey",borderColor:r[e]?"transparent":"#ccc"}}),n.jsx("div",{children:e})]},e))})}),n.jsx(I,{option:D,style:{height:200,width:"100%"}})]})};export{k as default};
//# sourceMappingURL=TimelineBar-CDf_zozf.js.map
