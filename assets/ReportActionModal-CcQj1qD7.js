import{r as n,N as f,j as s,cq as g,az as h,cr as b}from"./index-Bi7WHLKx.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="06d6cfa9-69d4-41ce-909b-757aea9bc870",t._sentryDebugIdIdentifier="sentry-dbid-06d6cfa9-69d4-41ce-909b-757aea9bc870")}catch{}function w({report:t}){const[a,r]=n.useState(!1),o=f.get("mainRole"),[c,m]=n.useState((t==null?void 0:t.messages)||[]),[l,d]=n.useState(""),i=n.useRef(null),u=async()=>{const e={text:l,isInstaller:o==="installer",time:new Date().toISOString()};l.trim()&&await b(t==null?void 0:t._id,{text:l,isInstaller:o==="installer",time:new Date().toISOString()})&&(m([...c,e]),d(""))},p=()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)};return n.useEffect(()=>{p()},[c]),s.jsxs(s.Fragment,{children:[s.jsx(g,{size:26,onClick:()=>r(!0),className:"text-text-secondary cursor-pointer"}),s.jsx(h,{modalOPen:a,setModalOpen:r,onCancel:()=>r(!1),title:"Installation Reports",isBottomButtomShow:!1,children:s.jsxs("div",{id:"ReportChatContainer",className:"flex flex-col h-[500px] font-baloo",children:[s.jsx("div",{id:"chatViewArea",className:"flex-1 overflow-y-auto p-4 space-y-4",ref:i,children:c.map((e,x)=>s.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${e.isInstaller?"ml-auto bg-[#6dc29a] text-white":"mr-auto bg-[#80CAA7]/10 text-text-primary"}`,children:[s.jsx("p",{className:"text-xs font-bold mb-1",children:o=="installer"?e.isInstaller?"You":"Manager":e.isInstaller?"Installer":"You"}),s.jsx("p",{className:"text-base mb-2",children:e.text}),s.jsx("p",{className:`text-sm  text-right ${e.isInstaller?"text-white":"text-primary"}`,children:new Date(e.time).toDateString()===new Date().toDateString()?new Date(e.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(e.time).toLocaleString([],{hour:"2-digit",minute:"2-digit",year:"numeric",month:"numeric",day:"numeric"})})]},x))}),s.jsxs("div",{id:"chatInputArea",className:"flex p-4 pb-0 border-t",children:[s.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Type your message...",className:"py-[18px] px-4 text-text-primary placeholder:text-[#A3AED0] h-[50px]  rounded-[16px] w-full text-base outline-none   border-[1px] focus:border-primary rounded-r-none border-r-0",onKeyPress:e=>e.key==="Enter"&&u()}),s.jsx("button",{onClick:u,className:"bg-primary text-white px-8 py-2 rounded-r-[16px] hover:bg-primary focus:outline-none focus:ring-2 ",children:"Send"})]})]})})]})}export{w as R};
//# sourceMappingURL=ReportActionModal-CcQj1qD7.js.map
