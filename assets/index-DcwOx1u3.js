import{a5 as T,X as m,r as l,O as w,u as D,a6 as d,a7 as p,N as r,j as U,a8 as v,a9 as x,aa as E}from"./index-DT7KcFIv.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new s.Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="3c007b89-829d-4743-ae48-cb8ad2ad0899",s._sentryDebugIdIdentifier="sentry-dbid-3c007b89-829d-4743-ae48-cb8ad2ad0899")}catch{}function L(){const s=T(),n=m(),{role:I}=n.state||{},[b,f]=l.useState(!0),{setStoreRole:h,setUser:k}=w(),a=D(),t=s.id.split("-"),i=()=>{if(!r.get("rootToken")){const e=x(),o=r.get("user");r.set("rootToken",e),r.set("rootRole",o==null?void 0:o.role)}},u=e=>{E(e)},g=l.useCallback(()=>{d({id:t[0]}).then(e=>{var o;(o=e==null?void 0:e.data)!=null&&o.role&&y(e.data.role)}).catch(e=>console.log(e))},[t]),y=l.useCallback(e=>{if(t.length>=2){p({id:t[0],params:{role:e==="nursing_home"?"nurse":"supports_agent"}}).then(async o=>{i(),await c({...o.data,sub_role:"elderly"}),u(o.data.access_token)}).catch(o=>console.log(o)),d({id:t[0]}).then(o=>{i(),o.data.role!=="nursing_home"&&c({...o.data,sub_role:"elderly"})}).catch(o=>console.log(o));return}d({id:s.id}).then(o=>c(o.data)).catch(o=>console.log(o)),p({id:s.id}).then(o=>{i(),u(o.data.access_token)}).catch(o=>console.log(o))},[t,s.id]),_=e=>{switch(e){case"super_admin":a("/support-agent/dashboard/");break;case"supports_agent":a("/supporter/support-agent/dashboard");break;case"nurse":a("/supporter/nurse/dashboard");break;case"end_user":a("/supporter/end-user/dashboard");break;case"elderly":a(`/supporter/elderlies/elderly-profile/${t[1]}?tab=overview`);break;default:a("/support-nurnt/dashboard")}};function c(e){r.set("user",e),r.set("mainRole",e.role),r.set("role",e.role),h({role:e.role}),k({role:e.role}),setTimeout(()=>{f(!1),_((e==null?void 0:e.sub_role)||(e==null?void 0:e.role))},1e3)}if(l.useEffect(()=>{g()},[g]),b)return U.jsx(v,{loaderTitle:"Loading User Profile"})}export{L as default};
//# sourceMappingURL=index-DcwOx1u3.js.map
