{"version":3,"file":"index-BsAm9ykK.js","sources":["../../node_modules/dayjs/plugin/isoWeek.js","../../src/Components/TimeSelection/index.jsx"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isoWeek=t()}(this,(function(){\"use strict\";var e=\"day\";return function(t,i,s){var a=function(t){return t.add(4-t.isoWeekday(),e)},d=i.prototype;d.isoWeekYear=function(){return a(this).year()},d.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var i,d,n,o,r=a(this),u=(i=this.isoWeekYear(),d=this.$u,n=(d?s.utc:s)().year(i).startOf(\"year\"),o=4-n.isoWeekday(),n.isoWeekday()>4&&(o+=7),n.add(o,e));return r.diff(u,\"week\")+1},d.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var n=d.startOf;d.startOf=function(e,t){var i=this.$utils(),s=!!i.u(t)||t;return\"isoweek\"===i.p(e)?s?this.date(this.date()-(this.isoWeekday()-1)).startOf(\"day\"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf(\"day\"):n.bind(this)(e,t)}}}));","import React, { useState, useEffect, useRef } from \"react\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport dayjs from \"dayjs\";\nimport isoWeek from \"dayjs/plugin/isoWeek\";\nimport weekOfYear from \"dayjs/plugin/weekOfYear\";\n\ndayjs.extend(isoWeek);\ndayjs.extend(weekOfYear);\n\nconst TimeSelection = (props) => {\n  const { handleClick = () => {}, name, setLoading } = props;\n  const [date, setDate] = useState({\n    text: \"Today\",\n    value: dayjs(),\n    endvalue: \"\",\n  });\n  const isMounted = useRef(true);\n\n  const handleLeftClick = () => {\n    if (name == \"Day\" || name == \"Daily\") {\n      const newDate = date.value.subtract(1, \"day\");\n      if (newDate.isBefore(dayjs(), \"day\")) {\n        setDate({\n          text: newDate.isSame(dayjs(), \"day\")\n            ? \"Today\"\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\n            ? \"Yesterday\"\n            : newDate.format(\"YYYY-MM-DD\"),\n          value: newDate,\n        });\n      }\n    } else if (name == \"Week\") {\n      let start = date.value.subtract(1, \"week\");\n      let end = date.endvalue.subtract(1, \"week\");\n\n      setDate({\n        value: start,\n        endvalue: end,\n        text: `Week ${start.week()}`,\n      });\n    } else {\n      let startOfMonth = date.value.subtract(1, \"month\");\n      let endOfMonth = date.endvalue.subtract(1, \"month\");\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\n      console.log(\"startOfMonth.month()\", startOfMonth.month());\n      setDate({\n        value: startOfMonth,\n        endvalue: endOfMonth,\n        text: `Month ${startOfMonth.month() + 1}`,\n      });\n    }\n  };\n\n  const handleRightClick = () => {\n    if (name == \"Day\" || name == \"Daily\") {\n      let newDate = date.value;\n      if (newDate.isBefore(dayjs(), \"day\")) {\n        newDate = date.value.add(1, \"day\");\n        setDate({\n          text: newDate.isSame(dayjs(), \"day\")\n            ? \"Today\"\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\n            ? \"Yesterday\"\n            : newDate.format(\"YYYY-MM-DD\"),\n          value: newDate,\n        });\n      }\n    } else if (name == \"Week\") {\n      const nextWeekStart = date.value.add(1, \"week\");\n      const nextWeekEnd = date.endvalue.add(1, \"week\");\n      // 不允许超过本周\n      if (nextWeekStart.isAfter(dayjs().startOf(\"isoWeek\"))) {\n        return;\n      }\n      let str = `Week ${nextWeekStart.week()}`;\n\n      setDate({\n        value: nextWeekStart,\n        endvalue: nextWeekEnd,\n        text: str,\n      });\n      return;\n    } else {\n      let startOfMonth = date.value.add(1, \"month\");\n      let endOfMonth = date.endvalue.add(1, \"month\");\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\n\n      if (endOfMonth.isAfter(dayjs(), \"month\")) {\n        return;\n      }\n\n      setDate({\n        value: startOfMonth,\n        endvalue: endOfMonth,\n        text: `Month ${startOfMonth.month() + 1}`,\n      });\n    }\n  };\n  useEffect(() => {\n    if (isMounted.current) {\n      isMounted.current = false;\n      return;\n    }\n\n    handleClick(date);\n  }, [date]);\n  useEffect(() => {\n    if (name == \"Day\" || name == \"Daily\") {\n      setDate({\n        value: dayjs(),\n        endvalue: \"\",\n        text: `Today`,\n      });\n    } else if (name == \"Week\") {\n      let start = dayjs().startOf(\"isoWeek\");\n\n      setDate({\n        value: start,\n        endvalue: dayjs().endOf(\"isoWeek\"),\n        text: `Week ${start.week()}`,\n      });\n    } else {\n      const startOfMonth = dayjs().startOf(\"month\");\n      const endOfMonth = dayjs().endOf(\"month\");\n      setDate({\n        value: startOfMonth,\n        endvalue: endOfMonth,\n        text: `Month ${startOfMonth.month() + 1}`,\n      });\n    }\n  }, [name]);\n\n  return (\n    <div className=\"flex w-[200px] justify-between items-center\">\n      <div\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center mr-[5px] \"\n        onClick={handleLeftClick}\n      >\n        {\" \"}\n        <LeftOutlined className=\"text-white\" />\n      </div>\n      <div className=\" text-[16px] text-cblock font-semibold\">{date.text}</div>\n      <div\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center \"\n        onClick={handleRightClick}\n      >\n        {\" \"}\n        <RightOutlined className=\"text-white\" />\n      </div>\n    </div>\n  );\n};\n\nexport default TimeSelection;\n"],"names":["e","t","module","this","i","s","a","d","n","o","r","u","dayjs","isoWeek","weekOfYear"],"mappings":"4aAAC,SAASA,EAAEC,EAAE,CAAsDC,EAAe,QAAAD,GAAkI,GAAEE,EAAM,UAAU,CAAc,IAAIH,EAAE,MAAM,OAAO,SAASC,EAAEG,EAAEC,EAAE,CAAC,IAAIC,EAAE,SAASL,EAAE,CAAC,OAAOA,EAAE,IAAI,EAAEA,EAAE,aAAaD,CAAC,CAAC,EAAEO,EAAEH,EAAE,UAAUG,EAAE,YAAY,UAAU,CAAC,OAAOD,EAAE,IAAI,EAAE,KAAM,CAAA,EAAEC,EAAE,QAAQ,SAASN,EAAE,CAAC,GAAG,CAAC,KAAK,OAAM,EAAG,EAAEA,CAAC,EAAE,OAAO,KAAK,IAAI,GAAGA,EAAE,KAAK,QAAS,GAAED,CAAC,EAAE,IAAII,EAAEG,EAAEC,EAAEC,EAAEC,EAAEJ,EAAE,IAAI,EAAEK,GAAGP,EAAE,KAAK,YAAa,EAACG,EAAE,KAAK,GAAGC,GAAGD,EAAEF,EAAE,IAAIA,GAAI,EAAC,KAAKD,CAAC,EAAE,QAAQ,MAAM,EAAEK,EAAE,EAAED,EAAE,WAAU,EAAGA,EAAE,WAAY,EAAC,IAAIC,GAAG,GAAGD,EAAE,IAAIC,EAAET,CAAC,GAAG,OAAOU,EAAE,KAAKC,EAAE,MAAM,EAAE,CAAC,EAAEJ,EAAE,WAAW,SAAS,EAAE,CAAC,OAAO,KAAK,OAAQ,EAAC,EAAE,CAAC,EAAE,KAAK,OAAO,EAAE,KAAK,IAAI,KAAK,IAAG,EAAG,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,IAAIC,EAAED,EAAE,QAAQA,EAAE,QAAQ,SAAS,EAAEN,EAAE,CAAC,IAAIG,EAAE,KAAK,OAAM,EAAGC,EAAE,CAAC,CAACD,EAAE,EAAEH,CAAC,GAAGA,EAAE,OAAkBG,EAAE,EAAE,CAAC,IAAjB,UAAmBC,EAAE,KAAK,KAAK,KAAK,QAAQ,KAAK,WAAU,EAAG,EAAE,EAAE,QAAQ,KAAK,EAAE,KAAK,KAAK,KAAK,KAAI,EAAG,GAAG,KAAK,aAAa,GAAG,CAAC,EAAE,MAAM,KAAK,EAAEG,EAAE,KAAK,IAAI,EAAE,EAAEP,CAAC,CAAC,CAAC,CAAC,qCCMn+BW,EAAM,OAAOC,CAAO,EACpBD,EAAM,OAAOE,CAAU","x_google_ignoreList":[0]}