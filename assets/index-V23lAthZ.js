import{r as a,u as b,ak as w,b7 as n,j as e,b8 as y,aO as j,al as v,g as C}from"./index-DT7KcFIv.js";import{L as k}from"./leaflet-src-BOUwzzIT.js";import{M as N,T as _,a as M,P as L}from"./leaflet-aHoAnJ5F.js";try{let o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new o.Error().stack;r&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[r]="c46888dd-5468-40c3-be13-7b3f6c4d47ff",o._sentryDebugIdIdentifier="sentry-dbid-c46888dd-5468-40c3-be13-7b3f6c4d47ff")}catch{}const A="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.8'%20clip-path='url(%23clip0_2_16)'%3e%3cpath%20d='M13.75%2020.1667C13.5069%2020.1667%2013.2737%2020.0701%2013.1018%2019.8982C12.9299%2019.7263%2012.8333%2019.4931%2012.8333%2019.25V15.5833C12.8333%2015.4325%2012.8705%2015.2839%2012.9417%2015.1509C13.0128%2015.0178%2013.1157%2014.9044%2013.2413%2014.8207L15.9913%2012.9873C16.1419%2012.8868%2016.3189%2012.8332%2016.5%2012.8332C16.6811%2012.8332%2016.8581%2012.8868%2017.0088%2012.9873L19.7588%2014.8207C19.8843%2014.9044%2019.9872%2015.0178%2020.0583%2015.1509C20.1295%2015.2839%2020.1667%2015.4325%2020.1667%2015.5833V19.25C20.1667%2019.4931%2020.0701%2019.7263%2019.8982%2019.8982C19.7263%2020.0701%2019.4931%2020.1667%2019.25%2020.1667H13.75Z'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.5%209.16667C16.5%207.22175%2015.7274%205.35648%2014.3521%203.98122C12.9769%202.60595%2011.1116%201.83333%209.16667%201.83333C7.22175%201.83333%205.35648%202.60595%203.98122%203.98122C2.60595%205.35648%201.83333%207.22175%201.83333%209.16667C1.83333%2013.7436%206.91075%2018.5102%208.61575%2019.9824C8.77467%2020.1016%208.96801%2020.1659%209.16667%2020.1657'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.5%2020.1667V17.4167'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.16667%2011.9167C10.6855%2011.9167%2011.9167%2010.6855%2011.9167%209.16667C11.9167%207.64788%2010.6855%206.41667%209.16667%206.41667C7.64788%206.41667%206.41667%207.64788%206.41667%209.16667C6.41667%2010.6855%207.64788%2011.9167%209.16667%2011.9167Z'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2_16'%3e%3crect%20width='22'%20height='22'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",I=o=>{const r={critical:"bg-red-500",warning:"bg-yellow-500",problem:"bg-blue-500"},c={critical:"animate-ping-critical",warning:"animate-ping-warning",problem:"animate-ping-problem"};return k.divIcon({className:"",html:`
      <div class="relative flex justify-center items-center">
        <div class="${c[o]} absolute h-8 w-8 rounded-full ${r[o]} opacity-75"></div>
        <div class="scale-150 h-3 w-4 ${r[o]} rounded-full"></div>
      </div>
    `})};function P({height:o=490},r){const c=b(),f={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e3,pauseOnHover:!0},[u,x]=a.useState([]),{notificationEvent:m}=w();function p(){console.log("referes"),v({to_date:"2025-05-25",from_date:C().format("YYYY-MM-DD"),is_resolved:!1,event:[2,3,5,9,8].join(","),alarm_type:[11,12,14,15,16,1,3,13,2].join(","),is_online:1,recovery:0}).then(i=>{i.data.length>0&&x(i.data)}).catch(i=>{console.log(i)})}a.useEffect(()=>{p()},[]),a.useImperativeHandle(r,()=>({getAlertListData:p})),a.useEffect(()=>{m&&p()},[m]);const h=Object.values(u.reduce((i,s)=>(i[s.elderly_id]||(i[s.elderly_id]=[]),i[s.elderly_id].push(s),i),{})).reduce((i,s)=>{const t={Critical:3,Warning:2,Problem:1};return s.sort((l,d)=>t[n(d)]-t[n(l)]),i[s[0].elderly_id]=s,i},{}),g=i=>{const s={Critical:3,Warning:2,Problem:1};return i.reduce((t,l)=>{const d=n(l);return s[d]>s[t]?d:t},"Problem").toLowerCase()};return e.jsx("div",{className:"w-full !z-0",style:{height:o+"px"},children:e.jsxs(N,{center:[51.505,-.09],zoom:2,zoomControl:!1,style:{height:"100%",width:"100%"},className:"!w-full rounded-[8px] overflow-hidden !outline-none z-0",children:[e.jsx(_,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),Object.entries(h).map(([i,s])=>e.jsxs(M,{position:[s[0].latitude||0,s[0].longitude||0],icon:I(g(s)),children:[e.jsx("style",{children:`
                .slick-dots {
                  margin-bottom: 20px;
                }
              `}),e.jsx(L,{className:"w-[350px] !drop-shadow-2xl shadow-none !pb-6",children:e.jsx(y,{...f,children:s.map((t,l)=>e.jsxs("div",{className:"!flex w-full flex-col !gap-6 font-baloo pt-2 pb-4",children:[e.jsxs("div",{className:"flex font-baloo cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col w-full",onClick:()=>{c("/support-nurnt/dashboard/alarm-detail",{state:{alertData:t,id:t==null?void 0:t.elderly_id}})},children:[e.jsx("h1",{className:"font-bold text-xl text-text-primary",children:t.elderly_name}),e.jsxs("span",{className:"font-normal text-base text-text-primary",children:["Age: ",e.jsx("b",{children:t.age||"-"})]})]}),e.jsx("div",{className:`p-4 py-3 leading-none font-semibold text-base h-fit ${n(t)==="Critical"?"bg-red-100 text-red-500":n(t)==="Warning"?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-500"} w-fit text-nowrap rounded-full flex items-center justify-center capitalize`,children:n(t)==="Critical"?"Critical Alert":n(t)==="Warning"?"Warning Alert":"Problem Alert"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("h1",{className:"font-bold text-2xl text-text-primary !m-0",children:t.room_name||"-"}),e.jsx("p",{className:"font-normal text-lg text-text-primary !m-0",children:"Location of Incident"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{width:22,height:22,src:A,alt:""}),e.jsx("p",{className:"!m-0 !mt-[2px] font-medium text-base text-text-primary/80",children:t.address||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://www.google.com/maps?q=${t.latitude},${t.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium !text-blue-500",children:"View on Google Maps"}),e.jsx(j,{size:18,className:"text-blue-500"})]})]})]},l))})})]},i))]})})}const z=a.forwardRef(P);export{z as M};
//# sourceMappingURL=index-V23lAthZ.js.map
