{"version":3,"file":"index-BUtiqbik.js","sources":["../../src/utils/throttle.js","../../src/Pages/SupportUserDetail/index.jsx"],"sourcesContent":["let timer; let\r\n    flag\r\n/**\r\n * 节流原理：在一定时间内，只能触发一次\r\n *\r\n * @param {Function} func 要执行的回调函数\r\n * @param {Number} wait 延时的时间\r\n * @param {Boolean} immediate 是否立即执行\r\n * @return null\r\n */\r\nfunction throttle(func, wait = 500, immediate = true) {\r\n    if (immediate) {\r\n        if (!flag) {\r\n            flag = true\r\n            // 如果是立即执行，则在wait毫秒内开始时执行\r\n      \r\n            typeof func === 'function' && func()\r\n            timer = setTimeout(() => {\r\n                flag = false\r\n            }, wait)\r\n        }\r\n    } else if (!flag) {\r\n        flag = true\r\n        // 如果是非立即执行，则在wait毫秒内的结束处执行\r\n        timer = setTimeout(() => {\r\n            flag = false\r\n            typeof func === 'function' && func()\r\n        }, wait)\r\n    }\r\n}\r\nexport default throttle\r\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\r\nimport { Space, Table, Tag, Modal } from \"antd\";\r\nimport { useroverViewCount } from \"@/api/AdminDashboard\";\r\nimport TabMenus from \"@/Components/TabMenus\";\r\nimport TimeSelection from \"@/Components/TimeSelection\";\r\nimport ls from \"store2\";\r\nimport AddIcon from \"@/Components/AddIcon\";\r\nimport Sort from \"../../Shared/sort/Sort\";\r\nimport { SidebarContext } from \"@/Context/CustomContext\";\r\nimport CustomButton from \"../../Shared/button/CustomButton\";\r\nimport SearchInput from \"../../Shared/Search/SearchInput\";\r\nimport AdminSupportAgentTable from \"@/Components/PubTable/AdminSupportAgentTable\";\r\n\r\nimport AdminFiled from \"@/Shared/AdminFiled/AdminFiled\";\r\n// import AdminSupportAgentTableAction from '@/Components/Admin/AdminSupportAgent/AdminSupportAgentTableAction';\r\nimport AdminSupportAgentTableAction from \"@/Components/PubTable/AdminSupportAgentTableAction\";\r\nimport { getUserPage } from \"@/api/AdminUser\";\r\nimport CreateAdminSupportAgent from \"@/Components/PubTable/CreateAndEditUsers\";\r\nimport * as SidebarContext1 from \"@/Context/CustomUsertable\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport throttle from \"@/utils/throttle\";\r\n\r\nconst AdminDashboard = () => {\r\n  const params = useParams();\r\n  let item = useLocation();\r\n  const [title, setTitle] = useState(\"Dashboard\");\r\n  const { role } = useContext(SidebarContext);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"Support Agents\");\r\n  const [menuName, setMenuName] = useState(\"[Nursing Home]’s Support Agents\");\r\n  const [btnName, setBtnName] = useState(\"Add New Support Agent\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [selected, setSelected] = useState(\"\");\r\n  const [modalOPen, setModalOpen] = useState(false);\r\n  const [page, SetPage] = useState({\r\n    current: 1,\r\n    size: 10,\r\n  });\r\n  const [menus, setMenus] = useState([\r\n    {\r\n      text: \"Support Agents\",\r\n      bo: true,\r\n      warring: false,\r\n    },\r\n  ]);\r\n  const [changeParams, setChangeParams] = useState({});\r\n  const [totle, SetTotle] = useState(0);\r\n  let [columns, setColumns] = useState([\r\n    {\r\n      title: \"Nursing Home\",\r\n      key: \"id\",\r\n\r\n      render: (row) => (\r\n        <button>\r\n          <AdminFiled data={row} />\r\n        </button>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Contact\",\r\n\r\n      render: (row) => (\r\n        <button>\r\n          <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary\">\r\n            {row.contactNumber}\r\n          </span>\r\n        </button>\r\n      ),\r\n    },\r\n\r\n    {\r\n      title: \"\",\r\n      key: \"id\",\r\n      width: 100,\r\n      render: (row) => (\r\n        // <CustomButton  >Pay now</CustomButton>\r\n        <AdminSupportAgentTableAction\r\n          getlist={() => getList(query)}\r\n          data={row}\r\n        />\r\n      ),\r\n    },\r\n  ]);\r\n  const data = [\"Time\", \"Name\"];\r\n  const [statistics, SetStatistics] = useState({\r\n    nursingHomes: 0,\r\n    elderlies: 0,\r\n    devicesConnected: 0,\r\n    monthlyRevenue: 0,\r\n  });\r\n  const [query, setQuey] = useState({\r\n    order: \"1\",\r\n    orderType: \"time\",\r\n    name: \"\",\r\n  });\r\n  const [list, SetList] = useState([]);\r\n  const handelOpenModal = () => {\r\n    setModalOpen(true);\r\n  };\r\n  const [user, SetUser] = useState(ls.get(\"user\"));\r\n\r\n  const HandleTabText = (e) => {\r\n    setActiveTab(e);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const init = () => {\r\n    let user = ls.get(\"user\");\r\n    let row = new URLSearchParams(item.search);\r\n    let query1 = { ...query };\r\n    let name = row.get(\"name\");\r\n    let id = row.get(\"id\");\r\n\r\n    setTitle(\"User\");\r\n\r\n    query1[name] = id;\r\n    query1.role = \"Support Agent\";\r\n    if (name == \"salesAgentId\") {\r\n      setChangeParams({\r\n        nursingHomeId: id,\r\n        salesAgentId: params.id,\r\n      });\r\n    }\r\n    if (name == \"distributorId\") {\r\n      setChangeParams({\r\n        nursingHomeId: id,\r\n        distributorId: params.id,\r\n      });\r\n    }\r\n    let role1 = role;\r\n    if (!role1) {\r\n      role1 = user.role;\r\n    }\r\n    setQuey(query1);\r\n    SetPage({\r\n      current: 1,\r\n      size: 10,\r\n    });\r\n  };\r\n  const getList = (query) => {\r\n    if (!query.role) return;\r\n    throttle(() => {\r\n      getUserPage({\r\n        ...query,\r\n        ...page,\r\n      }).then((res) => {\r\n        SetTotle(res.data.total);\r\n        SetList(res?.data?.records);\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n  useEffect(() => {\r\n    getList(query);\r\n  }, [page]);\r\n  useEffect(() => {\r\n    if (selected && query.orderType != selected) {\r\n      setQuey({\r\n        ...query,\r\n        ...{\r\n          orderType: selected.toLowerCase(),\r\n          order: selected === \"Time\" ? \"1\" : \"0\",\r\n        },\r\n      });\r\n      SetPage({ ...page, current: 1 });\r\n    }\r\n  }, [selected]);\r\n  useEffect(() => {\r\n    SetPage({ ...page, current: 1 });\r\n  }, [query.order]);\r\n  const handBlurchange = () => {\r\n    setQuey({ ...query, name: search.trim() });\r\n    SetPage({ ...page, current: 1 });\r\n  };\r\n\r\n  return (\r\n    <div className=\"pl-[20px] pr-[50px]\">\r\n      <div className=\"h-[100px] flex items-center justify-between\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\" text-[28px] font-semibold font-cblock \">{title}</div>\r\n        </div>\r\n        <div className=\"h-[40px] pl-[20px] pr-[20px]  rounded-[20px] bg-cblock   flex items-center \">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"14\"\r\n            height=\"14\"\r\n            viewBox=\"0 0 14 14\"\r\n            fill=\"none\"\r\n          >\r\n            <path\r\n              d=\"M8.65073 2.31039L11.4807 5.14035L4.31724 12.3038L1.48886 9.47387L8.65073 2.31039ZM13.6281 1.62787L12.3661 0.365808C11.8783 -0.121936 11.0863 -0.121936 10.5969 0.365808L9.38799 1.57474L12.218 4.40473L13.6281 2.99457C14.0064 2.61625 14.0064 2.00617 13.6281 1.62787ZM0.00787518 13.4516C-0.0436269 13.6834 0.165643 13.8911 0.397455 13.8347L3.551 13.0701L0.722618 10.2401L0.00787518 13.4516Z\"\r\n              fill=\"white\"\r\n            />\r\n          </svg>\r\n          <div className=\"pl-[20px]  text-white text-[14px] font-semibold  \">\r\n            Edit Nursing Home\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"pt-[20px] pb-[10px] flex\">\r\n        <TabMenus\r\n          menus={menus}\r\n          activeTab={activeTab}\r\n          setActiveTab={setActiveTab}\r\n        />\r\n      </div>\r\n      <div className=\"\">\r\n        {(activeTab == \"Support Agents\" || activeTab == \"Nursing Homes\") && (\r\n          <div>\r\n            <div className=\" bg-white rounded-2xl\">\r\n              <div className=\" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2\">\r\n                <div className=\" flex items-center justify-between w-full\">\r\n                  <h2 className=\" text-2xl font-bold text-text-primary\">\r\n                    {menuName}\r\n                  </h2>\r\n                </div>\r\n                <div className=\" flex items-center justify-end gap-5 w-full\">\r\n                  {/* =====Search sort and add admin button===== */}\r\n                  <SearchInput\r\n                    search={search}\r\n                    setSearch={setSearch}\r\n                    handBlurchange={handBlurchange}\r\n                    placeholder=\"Search Nursing Home\"\r\n                  />\r\n                  <Sort\r\n                    query={query}\r\n                    setQuey={setQuey}\r\n                    selected={selected}\r\n                    setSelected={setSelected}\r\n                    data={data}\r\n                  />\r\n                  <CustomButton\r\n                    onClick={() => handelOpenModal()}\r\n                    className={\" hidden lg:flex min-w-[80px]\"}\r\n                  >\r\n                    <AddIcon /> {btnName}\r\n                  </CustomButton>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\" grid grid-cols-1\">\r\n                <SidebarContext1.SidebarContext.Provider\r\n                  value={{ getlist: getList, query, totle, page, SetPage }}\r\n                >\r\n                  <AdminSupportAgentTable tableData={list} columns={columns} />\r\n                </SidebarContext1.SidebarContext.Provider>\r\n              </div>\r\n            </div>\r\n            <CreateAdminSupportAgent\r\n              item={{}}\r\n              changeParams={changeParams}\r\n              getlist={() => getList(query)}\r\n              role={query.role}\r\n              modalOPen={modalOPen}\r\n              setModalOpen={setModalOpen}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"names":["flag","throttle","func","wait","immediate","AdminDashboard","params","useParams","item","useLocation","title","setTitle","useState","role","useContext","SidebarContext","activeTab","setActiveTab","menuName","setMenuName","btnName","setBtnName","search","setSearch","selected","setSelected","modalOPen","setModalOpen","page","SetPage","menus","setMenus","changeParams","setChangeParams","totle","SetTotle","columns","setColumns","row","jsx","AdminFiled","AdminSupportAgentTableAction","getList","query","data","setQuey","list","SetList","handelOpenModal","ls","init","user","query1","name","id","role1","getUserPage","res","_a","useEffect","handBlurchange","jsxs","TabMenus","SearchInput","Sort","CustomButton","AddIcon","SidebarContext1.SidebarContext","AdminSupportAgentTable","CreateAdminSupportAgent"],"mappings":"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"}