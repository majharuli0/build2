{"version":3,"file":"AlertsHistoryTab-DXHloFAz.js","sources":["../../src/Pages/Elderlies/Components/TabContents/Alerts/utiles.jsx","../../src/Pages/Elderlies/Components/TabContents/Alerts/AlertsHistoryTab.jsx"],"sourcesContent":["import { useEffect, useState, useContext } from \"react\";\r\nimport AlertName from \"@/Components/NameCol/AlertName\";\r\nimport { LuEye } from \"react-icons/lu\";\r\nimport { Table } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ActionManu from \"@/Components/ActionManu/ActionManu\";\r\nimport LargeTextViewerModal from \"@/Components/LargeTextViewerModal/LargeTextViewerModal\";\r\nimport {\r\n  transformDateAndTime,\r\n  transformDateAndTimeToDuration,\r\n  getAlertType,\r\n  calculateDurationBetweenTimes,\r\n} from \"@/utils/helper\";\r\nimport { SidebarContext } from \"@/Context/CustomContext\";\r\nimport AutoUpdatingDuration from \"@/Components/AutoUpdatingDuration/AutoUpdatingDuration\";\r\nimport InlineActionManu from \"../../../../../Components/ActionManu/InlineActionManu\";\r\n\r\nexport default function useAlertTableColumns(type) {\r\n  const { rolesFormatter } = useContext(SidebarContext);\r\n  const navigate = useNavigate(); // Initialize the navigate function\r\n  const handleViewClick = (row) => {\r\n    window.scrollTo(0, 0);\r\n    navigate(\r\n      `/supporter/elderlies/elderly-profile/${row.elderly_id}?tab=overview`\r\n    );\r\n  };\r\n  const alertColsMapping = {\r\n    activeAlertsTableData: [\r\n      \"alertName\",\r\n      \"alertType\",\r\n      \"elderlyName\",\r\n      \"roomName\",\r\n      \"incidentTime\",\r\n      \"alertLife\",\r\n      \"address\",\r\n      \"viewElderly\",\r\n    ],\r\n    recentlyClosedAlertsTableData: [\r\n      \"alertName\",\r\n      \"incidentTime\",\r\n      \"alertLifetime\",\r\n      \"alertStatus\",\r\n      \"closedAt\",\r\n      \"closedBy\",\r\n      \"largeText\",\r\n      \"action2\",\r\n    ],\r\n    eventsTableData: [\r\n      \"eventName\",\r\n      \"elderlyName\",\r\n      \"eventTime\",\r\n      \"eventTimeline\",\r\n      \"hospital\",\r\n      \"expandColumn\",\r\n      \"largeText\",\r\n      \"disabilityType\",\r\n      \"action\",\r\n    ],\r\n  };\r\n  const AlertsTableColumns = {\r\n    alertName: {\r\n      title: \"Notifications Name\",\r\n      render: (row) => <AlertName data={row} />,\r\n    },\r\n    alertType: {\r\n      title: \"Notifications Type\",\r\n      render: (row) => <span>{getAlertType(row)}</span>,\r\n    },\r\n    elderlyName: {\r\n      title: \"User Name\",\r\n      dataIndex: \"elderly_name\",\r\n      render: (text) => <span>{text}</span>,\r\n    },\r\n    roomName: {\r\n      title: \"Room Name\",\r\n      dataIndex: \"room_name\",\r\n      render: (text) => <span>{text}</span>,\r\n    },\r\n\r\n    incidentTime: {\r\n      title: \"Observation Time\",\r\n      dataIndex: \"created_at\",\r\n      render: (text) => (\r\n        <span className=\"text-nowrap\">{transformDateAndTime(text)}</span>\r\n      ),\r\n    },\r\n    alertLifetime: {\r\n      title: \"Notification Duration\",\r\n      render: (row) =>\r\n        row?.closed_at ? (\r\n          <span className=\"text-nowrap\">\r\n            {calculateDurationBetweenTimes(row?.created_at, row?.closed_at)}\r\n          </span>\r\n        ) : (\r\n          <AutoUpdatingDuration date={row?.created_at} />\r\n        ),\r\n    },\r\n    alertLife: {\r\n      title: \"Notification Duration\",\r\n      dataIndex: \"created_at\",\r\n      render: (text) => (\r\n        <span className=\"text-nowrap\">\r\n          {/* {transformDateAndTimeToDuration(text)} */}\r\n          <AutoUpdatingDuration date={text} />\r\n        </span>\r\n      ),\r\n    },\r\n    alertStatus: {\r\n      title: \"Notification Status\",\r\n      // dataIndex: \"status\",\r\n      render: (row) =>\r\n        row?.closed_at ? (\r\n          <span className=\"text-nowrap\">\r\n            {row?.status == 0 ? \"True Notification\" : \"False Notification\"}\r\n          </span>\r\n        ) : (\r\n          <>--</>\r\n        ),\r\n    },\r\n    address: {\r\n      title: \"Address\",\r\n      width: \"230px\",\r\n      render: (row) => (\r\n        <span className=\"!w-[230px] text-nowrap\">{row.address}</span>\r\n      ),\r\n    },\r\n    //for recently closed alerts table\r\n    closedAt: {\r\n      title: \"Closed At\",\r\n      render: (row) =>\r\n        row?.closed_at ? (\r\n          <span className=\"text-nowrap\">\r\n            {transformDateAndTime(row?.closed_at)}\r\n          </span>\r\n        ) : (\r\n          <>--</>\r\n        ),\r\n    },\r\n    closedBy: {\r\n      title: \"Closed By\",\r\n      render: (row) =>\r\n        row?.closed_at ? (\r\n          <span className=\"text-nowrap\">\r\n            {row.closed_by} ({rolesFormatter[row.closed_by_role]} )\r\n          </span>\r\n        ) : (\r\n          <>--</>\r\n        ),\r\n    },\r\n    //for events table\r\n    eventName: {\r\n      title: \"Event Name\",\r\n      dataIndex: \"eventName\",\r\n      render: (text) => <span>{text}</span>,\r\n    },\r\n    eventTime: {\r\n      title: \"Event Time\",\r\n      dataIndex: \"time\",\r\n      render: (text) => <span className=\"text-nowrap\">{text}</span>,\r\n    },\r\n    eventTimeline: {\r\n      title: \"Event Timeline\",\r\n      dataIndex: \"alertLifetime\",\r\n      render: (text) => <span className=\"text-nowrap\">{text}</span>,\r\n    },\r\n    disabilityType: {\r\n      title: \"Disability Type\",\r\n      dataIndex: \"disabilityType\",\r\n      render: (text) => <span className=\"text-nowrap\">{text}</span>,\r\n    },\r\n    hospital: {\r\n      title: \"Hospital\",\r\n      dataIndex: \"hospital\",\r\n      render: (row) => (\r\n        <span className=\"text-nowrap\">\r\n          {row.name.length > 20 ? `${row.name.substring(0, 20)}...` : row.name}\r\n        </span>\r\n      ),\r\n    },\r\n    largeText: {\r\n      title: () => {\r\n        switch (type) {\r\n          case \"events\":\r\n            return \"Additional Info\";\r\n          case \"recentlyClosedAlert\":\r\n            return \"Comments\";\r\n          default:\r\n            return \"\";\r\n        }\r\n      },\r\n      render: (row) =>\r\n        row?.closed_at ? (\r\n          <LargeTextViewerModal\r\n            data={\r\n              type === \"recentlyClosedAlert\"\r\n                ? row?.comment\r\n                : type === \"events\"\r\n                ? row?.additionalInfo\r\n                : \"\"\r\n            }\r\n            title={\r\n              type === \"recentlyClosedAlert\"\r\n                ? \"Comment\"\r\n                : type === \"events\"\r\n                ? \"Additional Info\"\r\n                : \"\"\r\n            }\r\n          />\r\n        ) : (\r\n          \"--\"\r\n        ),\r\n    },\r\n    expandColumn: Table.EXPAND_COLUMN,\r\n    viewElderly: {\r\n      // title: \"View Elderly\",\r\n      render: (row) => (\r\n        <span\r\n          onClick={() => handleViewClick(row)}\r\n          className=\"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100\"\r\n        >\r\n          View <LuEye />\r\n        </span>\r\n      ),\r\n    },\r\n    action: {\r\n      title: \"Action\",\r\n      render: (row) => <ActionManu row={row} />,\r\n    },\r\n    action2: {\r\n      align: \"right\",\r\n      render: (row) => <InlineActionManu row={row} onlyFall={true} />,\r\n    },\r\n  };\r\n  const [alertTableColumns, setAlertTableColumns] = useState(undefined);\r\n  useEffect(() => {\r\n    if (type == \"activeAlert\") {\r\n      const cols = alertColsMapping.activeAlertsTableData.map((col) => {\r\n        return AlertsTableColumns[col];\r\n      });\r\n      setAlertTableColumns(cols);\r\n    } else if (type == \"recentlyClosedAlert\") {\r\n      const cols = alertColsMapping.recentlyClosedAlertsTableData.map((col) => {\r\n        return AlertsTableColumns[col];\r\n      });\r\n      setAlertTableColumns(cols);\r\n    } else if (type == \"events\") {\r\n      const cols = alertColsMapping.eventsTableData.map((col) => {\r\n        return AlertsTableColumns[col];\r\n      });\r\n      setAlertTableColumns(cols);\r\n    } else {\r\n      setAlertTableColumns([]);\r\n    }\r\n  }, []);\r\n  return alertTableColumns;\r\n}\r\n\r\nexport { useAlertTableColumns };\r\n","import React, { useEffect, useState, useCallback, useContext } from \"react\";\r\nimport { getAlertList } from \"@/api/elderlySupport\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { SidebarContext } from \"@/Context/CustomUsertable\";\r\nimport {\r\n  Segmented,\r\n  ConfigProvider,\r\n  Select,\r\n  Checkbox,\r\n  Button,\r\n  Table,\r\n} from \"antd\";\r\n// import { alertHistoryColumns } from \"./utiles\";\r\nimport { useAlertTableColumns } from \"./utiles\";\r\nimport { getAlertInfoViaEventDetails, getAlertsGroup } from \"@/utils/helper\";\r\nimport { CustomContext } from \"@/Context/UseCustomContext\";\r\nimport AlertCloseModal from \"@/Components/ActiveAlerts/AlertCloseModal\";\r\n\r\nexport default function AlertsHistoryTab() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [openAlertCloseModal, setOpenAlertCloseModal] = useState(false);\r\n  const recentlyClosedAlertTableColumns = useAlertTableColumns(\r\n    \"recentlyClosedAlert\"\r\n  );\r\n  const { elderlyDetails } = useContext(CustomContext);\r\n\r\n  const [alertHistory, setAlertHistory] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(10); // Add pageSize state\r\n  const [total, setTotal] = useState(0);\r\n  const [alertHistiryQuery, setAlertHistiryQuery] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isResolved, setIsResolved] = useState(null);\r\n\r\n  const getAlartsHistory = useCallback(() => {\r\n    setLoading(true);\r\n    getAlertList({\r\n      to_date: \"2024-11-30\",\r\n      from_date: dayjs().format(\"YYYY-MM-DD\"),\r\n      is_resolved: isResolved,\r\n      elderly_id: elderlyDetails?._id,\r\n      page: page, // Fix: pass page correctly\r\n      limit: pageSize, // Fix: add limit parameter\r\n      ...alertHistiryQuery,\r\n    })\r\n      .then((res) => {\r\n        setTotal(res.total);\r\n        setLoading(false);\r\n        setAlertHistory(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  }, [page, pageSize, alertHistiryQuery, isResolved, elderlyDetails?._id]); // Add pageSize to dependencies\r\n\r\n  useEffect(() => {\r\n    getAlartsHistory();\r\n  }, [getAlartsHistory]);\r\n\r\n  function onAlertHistorySegmantChnage(value) {\r\n    SetPage(1);\r\n    setAlertHistiryQuery(getAlertsGroup(value));\r\n    setPage(1); // Reset to first page when filter changes\r\n  }\r\n\r\n  // Handle pagination change\r\n  const handleTableChange = (pagination) => {\r\n    setPage(pagination.current);\r\n    setPageSize(pagination.pageSize);\r\n  };\r\n\r\n  // Determine if an alert is Critical or Warning based on event type\r\n  const getAlertSeverity = (item) => {\r\n    return getAlertInfoViaEventDetails(item).label;\r\n  };\r\n\r\n  // Check if item should be selectable (checkbox enabled)\r\n  const isItemSelectable = (item) => {\r\n    const severity = getAlertSeverity(item);\r\n    // Enable checkbox only for Critical and Warning items that are not resolved\r\n    return (\r\n      (severity === \"Critical\" || severity === \"Warning\") &&\r\n      item.is_resolved === false\r\n    );\r\n  };\r\n\r\n  // Handle checkbox selection\r\n  const handleCheckboxChange = (itemId, checked) => {\r\n    if (checked) {\r\n      setSelectedItems((prev) => [...prev, itemId]);\r\n    } else {\r\n      setSelectedItems((prev) => prev.filter((id) => id !== itemId));\r\n    }\r\n  };\r\n\r\n  // Handle select all checkboxes\r\n  const handleSelectAll = (checked) => {\r\n    if (checked) {\r\n      const selectableItems = alertHistory\r\n        .filter((item) => isItemSelectable(item))\r\n        .map((item) => item._id || item.id);\r\n      setSelectedItems(selectableItems);\r\n    } else {\r\n      setSelectedItems([]);\r\n    }\r\n  };\r\n\r\n  // Get selectable items count\r\n  const selectableItemsCount = alertHistory.filter(isItemSelectable).length;\r\n\r\n  // Handle bulk action\r\n  const handleBulkAction = () => {\r\n    // Add your bulk action logic here\r\n    setOpenAlertCloseModal(true);\r\n    // You can add API calls or other actions here\r\n  };\r\n\r\n  // Row selection configuration for Ant Design Table\r\n  const rowSelection = {\r\n    selectedRowKeys: selectedItems,\r\n    onChange: (selectedKeys) => setSelectedItems(selectedKeys),\r\n    getCheckboxProps: (record) => ({\r\n      // Disable checkbox for items that are NOT Critical/Warning OR are resolved\r\n      disabled: !isItemSelectable(record),\r\n    }),\r\n  };\r\n\r\n  // Handle filter changes that should reset pagination\r\n  const handleFilterChange = (filterValue) => {\r\n    setIsResolved(filterValue);\r\n    setPage(1); // Reset to first page when filter changes\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id=\"Elderlies\"\r\n      className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6\"\r\n    >\r\n      <div id=\"Elderlies_Header\" className=\"w-full flex justify-between\">\r\n        <h1 className=\"text-[24px] font-bold\">Notifications History</h1>\r\n        <div className=\"flex gap-4 h-fit items-center\">\r\n          {selectedItems.length > 0 && (\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={handleBulkAction}\r\n              style={{\r\n                backgroundColor: \"#252F67\",\r\n                borderColor: \"#252F67\",\r\n              }}\r\n            >\r\n              Action ({selectedItems.length})\r\n            </Button>\r\n          )}\r\n\r\n          <ConfigProvider\r\n            theme={\r\n              {\r\n                // components: {\r\n                //   Segmented: {\r\n                //     itemSelectedBg: \"#252F67\",\r\n                //     itemSelectedColor: \"#fff\",\r\n                //     fontFamily: \"Baloo2\",\r\n                //   },\r\n                // },\r\n              }\r\n            }\r\n          >\r\n            <Segmented\r\n              size=\"large\"\r\n              options={alertHistorySegmentOptions}\r\n              onChange={(value) => onAlertHistorySegmantChnage(value)}\r\n            />\r\n          </ConfigProvider>\r\n\r\n          <ConfigProvider\r\n            theme={{\r\n              token: {\r\n                colorPrimary: \"#8086AC\",\r\n              },\r\n            }}\r\n          >\r\n            <Select\r\n              size=\"large\"\r\n              style={{\r\n                width: \"120px\",\r\n                height: \"40px\",\r\n                borderRadius: \"10px !important\",\r\n              }}\r\n              onChange={(selectedValue, option) => {\r\n                handleFilterChange(selectedValue); // Use the new handler\r\n              }}\r\n              placeholder=\"Filter by Alert Status\"\r\n              value={isResolved}\r\n              options={[\r\n                {\r\n                  label: \"All Alerts\",\r\n                  value: null,\r\n                },\r\n                {\r\n                  label: \"Resolved\",\r\n                  value: true,\r\n                },\r\n                {\r\n                  label: \"Non-Resolved\",\r\n                  value: false,\r\n                },\r\n              ]}\r\n            />\r\n          </ConfigProvider>\r\n        </div>\r\n      </div>\r\n\r\n      <SidebarContext.Provider\r\n        value={{\r\n          getLatestAlarmList: {\r\n            getAlartsHistory,\r\n          },\r\n        }}\r\n      >\r\n        <ConfigProvider\r\n          theme={{\r\n            Table: {\r\n              rowSelectedHoverBg: \"#fff\",\r\n              rowSelectedBg: \"#ba80f0\",\r\n            },\r\n          }}\r\n        >\r\n          <Table\r\n            rowSelection={rowSelection}\r\n            columns={\r\n              Array.isArray(recentlyClosedAlertTableColumns)\r\n                ? recentlyClosedAlertTableColumns\r\n                : []\r\n            }\r\n            dataSource={alertHistory}\r\n            rowKey=\"_id\"\r\n            loading={loading}\r\n            pagination={{\r\n              current: page,\r\n              pageSize: pageSize,\r\n              total: total,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total, range) =>\r\n                `${range[0]}-${range[1]} of ${total} items`,\r\n              pageSizeOptions: [\"10\", \"20\", \"50\", \"100\"],\r\n            }}\r\n            onChange={handleTableChange} // Add onChange handler\r\n            locale={{ emptyText: \"No recent alerts\" }}\r\n            className=\"rounded-lg w-full\"\r\n            scroll={{ x: 700 }}\r\n          />\r\n        </ConfigProvider>\r\n      </SidebarContext.Provider>\r\n      <AlertCloseModal\r\n        openAlertCloseModal={openAlertCloseModal}\r\n        setOpenAlertCloseModal={setOpenAlertCloseModal}\r\n        selectedAlert={selectedItems}\r\n        getAlertListDatas={() => {\r\n          getAlartsHistory();\r\n          setSelectedItems([]);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const alertHistorySegmentOptions = [\r\n  {\r\n    label: \"All Activity\",\r\n    value: \"All Activity\",\r\n  },\r\n  {\r\n    label: \"Critical\",\r\n    value: \"Critical\",\r\n  },\r\n  {\r\n    label: \"Warning\",\r\n    value: \"Warning\",\r\n  },\r\n  {\r\n    label: \"Informational\",\r\n    value: \"Info\",\r\n  },\r\n];\r\n"],"names":["useAlertTableColumns","type","rolesFormatter","useContext","SidebarContext","navigate","useNavigate","handleViewClick","row","alertColsMapping","AlertsTableColumns","jsx","AlertName","getAlertType","text","transformDateAndTime","calculateDurationBetweenTimes","AutoUpdatingDuration","jsxs","LargeTextViewerModal","Table","LuEye","ActionManu","InlineActionManu","alertTableColumns","setAlertTableColumns","useState","useEffect","cols","col","AlertsHistoryTab","selectedItems","setSelectedItems","openAlertCloseModal","setOpenAlertCloseModal","recentlyClosedAlertTableColumns","elderlyDetails","CustomContext","alertHistory","setAlertHistory","page","setPage","pageSize","setPageSize","total","setTotal","alertHistiryQuery","setAlertHistiryQuery","loading","setLoading","isResolved","setIsResolved","getAlartsHistory","useCallback","getAlertList","dayjs","res","err","onAlertHistorySegmantChnage","value","getAlertsGroup","handleTableChange","pagination","getAlertSeverity","item","getAlertInfoViaEventDetails","isItemSelectable","severity","handleBulkAction","rowSelection","selectedKeys","record","handleFilterChange","filterValue","Button","ConfigProvider","Segmented","alertHistorySegmentOptions","Select","selectedValue","option","range","AlertCloseModal"],"mappings":"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"}