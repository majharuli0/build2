{"version":3,"file":"index-PyJ226MV.js","sources":["../../src/Pages/TransectionHistory/utiles.jsx","../../src/Pages/TransectionHistory/index.jsx"],"sourcesContent":["import RefundsRequestModal from \"@/Components/RefundsModal/RefundsRequestModal\";\nimport { Tag, Tooltip } from \"antd\";\nimport { useState } from \"react\";\nimport AdminFiled from \"../../Shared/AdminFiled/AdminFiled\";\nimport { FireTwoTone, StopOutlined, SyncOutlined } from \"@ant-design/icons\";\nimport alipay from \"../../assets/icon/payment-method-icons/alipay.svg\";\nimport jcb from \"../../assets/icon/payment-method-icons/jcb.svg\";\nimport gpay from \"../../assets/icon/payment-method-icons/gpay.svg\";\nimport applepay from \"../../assets/icon/payment-method-icons/applepay.svg\";\nimport unionpay from \"../../assets/icon/payment-method-icons/unionpay.svg\";\nimport mastercard from \"../../assets/icon/payment-method-icons/mastercard.svg\";\nimport paypal from \"../../assets/icon/payment-method-icons/paypal.svg\";\nimport visa from \"../../assets/icon/payment-method-icons/visa.svg\";\nimport SubscriptionUserAction from \"../../Components/ActionManu/SubscriptionUserAction\";\nimport { convertUnixToReadableDate, formatCreatedAt } from \"../../utils/helper\";\nimport SubDetails from \"../../Components/ActionManu/SubDetails\";\n\nconst TransactionIdColumn = ({ transactionId }) => {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(transactionId);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000); // Reset after 2 seconds\n  };\n  const displayedId =\n    transactionId?.length > 22\n      ? transactionId?.slice(0, 22) + \"...\"\n      : transactionId;\n\n  return (\n    <Tooltip title={copied ? \"Copied!\" : \"Click to copy\"}>\n      <span\n        className=\"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap cursor-pointer\"\n        onClick={handleCopy}\n      >\n        {displayedId}\n      </span>\n    </Tooltip>\n  );\n};\n\nexport const paymentHistoryColumn = [\n  {\n    title: \"Transaction Date\",\n    render: (row) => (\n      <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap\">\n        {formatCreatedAt(row?.created_at) || \"N/A\"}\n      </span>\n    ),\n  },\n  {\n    title: \"Transaction ID\",\n    render: (row) => (\n      <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap w-[100px]\">\n        <TransactionIdColumn transactionId={row?.transaction_id} />\n      </span>\n    ),\n  },\n  {\n    title: \"User Email\",\n    render: (row) => (\n      <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap w-[100px]\">\n        <TransactionIdColumn\n          transactionId={row?.metadata?.customer_details?.email}\n        />{\" \"}\n        ({row?.metadata?.customer_details?.name || \"N/A\"})\n      </span>\n    ),\n  },\n\n  {\n    title: \"Payment Status\",\n    render: (row) => (\n      <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap capitalize\">\n        <Tag color={`${row?.payment_status == \"paid\" ? \"green\" : \"red\"}`}>\n          {\" \"}\n          {row?.payment_status || \"N/A\"}\n        </Tag>\n      </span>\n    ),\n  },\n  {\n    title: \"Provider\",\n    render: (row) => (\n      <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap capitalize\">\n        {row?.provider || \"N/A\"}\n      </span>\n    ),\n  },\n  {\n    title: \"Amount\",\n    render: (row) => (\n      <button>\n        <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap uppercase\">\n          ${row?.amount || 0} {row?.currency || \"USD\"}\n        </span>\n      </button>\n    ),\n  },\n\n  {\n    title: \"Details\",\n    render: (row) => {\n      const isActive = Math.random() < 0.5;\n      return (\n        <button>\n          <span className=\"text-[14px] xl:text-base font-normal text-text-secondary flex items-center gap-1\">\n            <SubDetails data={row} />\n          </span>\n        </button>\n      );\n    },\n  },\n];\n","import { useCallback, useEffect, useState } from \"react\";\nimport { paymentHistoryColumn } from \"./utiles\";\nimport CustomTable from \"@/Shared/Table/CustomTable\";\nimport { SidebarContext } from \"@/Context/CustomUsertable\";\nimport { getOrders } from \"@/api/ordersManage\";\nimport { fetchUsers } from \"../../redux/features/users/usersSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Input, Select } from \"antd\";\nimport { FiSearch } from \"react-icons/fi\";\nimport { getPaymentHistory, getSubscriptions } from \"../../api/subscriptions\";\n\nexport default function TransectionHistory() {\n  const [loading, setLoading] = useState(true);\n  const [page, SetPage] = useState({});\n  const [total, setTotal] = useState(0);\n  const [paymentHisotry, setPaymentHisotry] = useState([]);\n  const getSubscriptionsList = useCallback(() => {\n    setLoading(true);\n    getPaymentHistory(page)\n      .then((res) => {\n        setPaymentHisotry(res?.data || []);\n        setTotal(res?.total);\n      })\n      .then((err) => {\n        console.error(\"Error fetching subscriptions:\", err);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [page]);\n  useEffect(() => {\n    getSubscriptionsList();\n  }, [getSubscriptionsList]);\n  return (\n    <>\n      <div\n        id=\"refunds_request\"\n        className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6\"\n      >\n        <div\n          id=\"Recently_Closed_Alerts_Header\"\n          className=\"w-full flex justify-between\"\n        >\n          {/* <Input\n            size=\"large\"\n            placeholder=\"Customer name, email...\"\n            prefix={<FiSearch className=\"text-gray-400\" />}\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            className=\" pr-20 border border-gray-300 max-w-[300px]\"\n            style={{ boxShadow: \"none\" }}\n          />\n          <Select\n            defaultValue=\"All\"\n            style={{ width: 150 }}\n            size=\"large\"\n            onChange={handleChange}\n            options={[\n              { value: \"All\", label: \"All Status\" },\n              { value: \"Active\", label: \"Active\" },\n              { value: \"Canceled\", label: \"Canceled\" },\n            ]}\n          /> */}\n        </div>\n        <SidebarContext.Provider\n          value={{\n            total: total,\n            page,\n            SetPage,\n            getList: getSubscriptionsList,\n          }}\n        >\n          <CustomTable\n            loading={loading}\n            columns={paymentHistoryColumn}\n            tableData={paymentHisotry}\n          />\n        </SidebarContext.Provider>\n      </div>\n    </>\n  );\n}\n"],"names":["TransactionIdColumn","transactionId","copied","setCopied","useState","handleCopy","displayedId","jsx","Tooltip","paymentHistoryColumn","row","formatCreatedAt","jsxs","_b","_a","_d","_c","Tag","SubDetails","TransectionHistory","loading","setLoading","page","SetPage","total","setTotal","paymentHisotry","setPaymentHisotry","getSubscriptionsList","useCallback","getPaymentHistory","res","err","useEffect","Fragment","SidebarContext","CustomTable"],"mappings":"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"}