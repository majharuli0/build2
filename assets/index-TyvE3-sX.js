import{r as a,$ as m,j as e,fA as y,az as N,fB as C,fC as S,aB as _,fD as w,aD as f,T as I,af as R,fE as A}from"./index-B3UPp0Yx.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="90737c07-68cf-4a9d-abbe-00e617f4a077",t._sentryDebugIdIdentifier="sentry-dbid-90737c07-68cf-4a9d-abbe-00e617f4a077")}catch{}function D({record:t}){const[n,s]=a.useState(!1),o=()=>s(!1),[l,x]=a.useState(!1),[d,i]=a.useState(""),[h,k]=a.useState(t.total),[b,p]=a.useState(""),g=a.useContext(m);console.log(t);const j=u=>{u.preventDefault();let r;l?r=d:r=h,console.log(r),w(t==null?void 0:t.transaction_id,{amount:Number(r)}).then(c=>{console.log(c),s(!1),g.getList(),f.success("Refund request sent successfully")}).catch(c=>{console.log(c),f.error("Something went wrong, Please try again or Try From Stripe Dashboard")})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 hover:bg-gray-100 p-2 rounded-lg hover:text-primary",children:[e.jsx(y,{size:25}),e.jsx("span",{className:"text-base font-medium",children:"Refund"})]}),e.jsx(N,{modalOPen:n,setModalOpen:s,onclose:o,buttonText:"Confirm Refund",handleSubmit:j,title:"Refund",children:e.jsxs("div",{children:[e.jsxs("div",{id:"note",className:"text-yellow-600 bg-yellow-50/50 rounded-lg p-3 flex flex-col items-start gap-2",children:[e.jsx(C,{className:"text-yellow-600 text-2xl"}),e.jsxs("p",{className:"text-[14px] xl:text-base font-normal  ",children:["Refunds can take ",e.jsx("b",{children:"up to 10 business days"})," to appear in a customer's account. You can check the status of a refund on the Transaction page or the Payments tab of The Stripe Dashboard."]})]}),e.jsxs("ul",{className:"list-none list-inside flex flex-col gap-2 mt-3",children:[e.jsxs("li",{className:"text-[16px] xl:text-base font-normal flex items-center gap-2",children:["Transaction ID:"," ",e.jsx("span",{className:"font-bold",children:t.transaction_id})]}),e.jsxs("li",{className:"text-[16px] xl:text-base font-normal flex items-center gap-2",children:["Amount: ",e.jsxs("span",{className:"font-bold",children:["$",t.total]}),e.jsx(S,{checked:l,onChange:()=>x(!l),children:"Custom amount"})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx(_,{placeholder:"Enter custom amount",type:"number",disabled:!l,register:{value:d,onChange:u=>{const r=u.target.value,c=parseFloat(r);r===""||c<=t.total?(i(r),p("")):p("Custom amount must be less than or equal to the total amount.")}},error:{type:"required",message:b}})})]})})]})}const T=({transactionId:t})=>{const[n,s]=a.useState(!1),o=()=>{navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)};return e.jsx(I,{title:n?"Copied!":"Click to copy",children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap cursor-pointer",onClick:o,children:t})})},v=[{title:"Action",render:t=>e.jsx(D,{record:t})},{title:"Transaction ID",render:t=>e.jsx(T,{transactionId:t.transaction_id})},{title:"Office Identifier",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:t.office_name})})},{title:"Agent Name (ID Number)",render:t=>e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:[t.agent_name," (",t.agent_unique_id,")"]})})},{title:"Date of Sales",render:t=>{const n=new Date(t.created_at).toLocaleDateString("en-CA");return e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:n})})}},{title:"Product Name",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex flex-col gap-2",children:t.products.filter((n,s,o)=>n.type!=="Seenyor Kit"||o.findIndex(l=>l.type==="Seenyor Kit")===s).map((n,s)=>["Seenyor Kit","Installation"].includes(n.type)&&s<2&&e.jsx("span",{children:n.type},s))})})},{title:"Product Price",render:t=>e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary",children:["$",t.products.filter(n=>["Seenyor Kit","Installation","AI Monitoring"].includes(n.type)).reduce((n,s)=>n+s.price,0).toFixed(2)]})})},{title:"Addon Name",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex flex-col gap-2",children:t.products.map((n,s)=>!["Seenyor Kit","Installation","AI Monitoring"].includes(n.type)&&e.jsx("span",{children:n.type},s))})})},{title:"Addon Price",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:t.products.map((n,s)=>!["Seenyor Kit","Installation","AI Monitoring"].includes(n.type)&&e.jsxs("span",{children:["$",n.price.toFixed(2)]},s))})})},{title:"Total Price",render:t=>e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:["$",t.total.toFixed(2)]})})},{title:"Installation Status",render:t=>{let n;switch(t.installation_status){case"not_started":n="bg-[#5d5d5d]";break;case"pending":n="bg-[#833af1]";break;case"completed":n="bg-[#36b610]";break;default:n="bg-black"}const s={not_started:"Not Started",pending:"Pending",completed:"Completed"};return e.jsx("button",{children:e.jsx("span",{className:`text-[14px] xl:text-base capitalize font-normal text-white p-2 px-3 py-1 ${n} rounded-lg`,children:s[t.installation_status]})})}}];function q(){const[t,n]=a.useState([]),[s,o]=a.useState(!1),[l,x]=a.useState({});function d(){o(!0),A({payment_status:"pending",is_refund_requested:!0,...l}).then(i=>{n(i),console.log(i==null?void 0:i.data),o(!1)})}return a.useEffect(()=>{d()},[l]),e.jsx(e.Fragment,{children:e.jsxs("div",{id:"refunds_request",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[e.jsx("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold text-primary",children:"All Request"})}),e.jsx(m.Provider,{value:{total:t==null?void 0:t.total,page:l,SetPage:x,getList:d},children:e.jsx(R,{loading:s,columns:v,tableData:t==null?void 0:t.data})})]})})}export{q as default};
//# sourceMappingURL=index-TyvE3-sX.js.map
