import{a4 as m,X as U,r as l,O as D,u as R,a5 as d,a6 as p,N as t,j as x,a7 as E,a8 as I,a9 as S}from"./index-Bi7WHLKx.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new s.Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="e0968f03-1c72-4796-8478-8f5f54eae55d",s._sentryDebugIdIdentifier="sentry-dbid-e0968f03-1c72-4796-8478-8f5f54eae55d")}catch{}function C(){const s=m(),a=U(),{role:h}=a.state||{},[b,y]=l.useState(!0),{setStoreRole:_,setUser:k}=D(),r=R();let n=s.id.split("-");const[L,P]=l.useState(""),i=()=>{let e=t.get("user");const o=I();t.get("rootToken")||(t.set("rootToken",o),t.set("rootRole",e.role))},c=e=>{S(e)},f=l.useCallback(()=>{d({id:n[0]}).then(e=>{var o,g;(o=e==null?void 0:e.data)!=null&&o.role&&w((g=e==null?void 0:e.data)==null?void 0:g.role)}).catch(e=>{console.log(e)})},[]),w=l.useCallback(e=>{if(n.length>=2){p({id:n[0],params:{role:e==="nursing_home"?"nurse":"supports_agent"}}).then(async o=>{await i(),await u({...o.data,sub_role:"elderly"}),await c(o.data.access_token)}).catch(o=>{console.log(o)}),d({id:n[0]}).then(o=>{i(),o.data.role!=="nursing_home"&&u({...o.data,sub_role:"elderly"})}).catch(o=>{console.log(o)});return}d({id:s.id}).then(o=>{u(o.data)}).catch(o=>{console.log(o)}),p({id:s.id}).then(o=>{i(),c(o.data.access_token)}).catch(o=>{console.log(o)})},[h,s.id]),T=e=>{e=="super_admin"?r("/support-agent/dashboard/"):e=="supports_agent"?r("/supporter/support-agent/dashboard"):e=="nurse"?r("/supporter/nurse/dashboard"):e=="end_user"?r("/supporter/end-user/dashboard"):e=="elderly"?r(`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`):r("/support-nurnt/dashboard")};function u(e){t.set("user",e),t.set("mainRole",e.role),t.set("role",e.role),_({role:e.role}),k({role:e.role}),setTimeout(()=>{y(!1),T((e==null?void 0:e.sub_role)||(e==null?void 0:e.role))},1500)}if(l.useEffect(()=>{f()},[f]),b)return x.jsx(E,{loaderTitle:"Loading User Profile"})}export{C as default};
//# sourceMappingURL=index-guZm3qzJ.js.map
