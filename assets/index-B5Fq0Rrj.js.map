{"version":3,"file":"index-B5Fq0Rrj.js","sources":["../../node_modules/dayjs/plugin/isoWeek.js","../../src/Components/TimeSelection/index.jsx"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isoWeek=t()}(this,(function(){\"use strict\";var e=\"day\";return function(t,i,s){var a=function(t){return t.add(4-t.isoWeekday(),e)},d=i.prototype;d.isoWeekYear=function(){return a(this).year()},d.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var i,d,n,o,r=a(this),u=(i=this.isoWeekYear(),d=this.$u,n=(d?s.utc:s)().year(i).startOf(\"year\"),o=4-n.isoWeekday(),n.isoWeekday()>4&&(o+=7),n.add(o,e));return r.diff(u,\"week\")+1},d.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var n=d.startOf;d.startOf=function(e,t){var i=this.$utils(),s=!!i.u(t)||t;return\"isoweek\"===i.p(e)?s?this.date(this.date()-(this.isoWeekday()-1)).startOf(\"day\"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf(\"day\"):n.bind(this)(e,t)}}}));","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport dayjs from \"dayjs\";\r\nimport isoWeek from \"dayjs/plugin/isoWeek\";\r\nimport weekOfYear from \"dayjs/plugin/weekOfYear\";\r\n\r\ndayjs.extend(isoWeek);\r\ndayjs.extend(weekOfYear);\r\n\r\nconst TimeSelection = (props) => {\r\n  const { handleClick = () => {}, name, setLoading } = props;\r\n  const [date, setDate] = useState({\r\n    text: \"Today\",\r\n    value: dayjs(),\r\n    endvalue: \"\",\r\n  });\r\n  const isMounted = useRef(true);\r\n\r\n  const handleLeftClick = () => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      const newDate = date.value.subtract(1, \"day\");\r\n      if (newDate.isBefore(dayjs(), \"day\")) {\r\n        setDate({\r\n          text: newDate.isSame(dayjs(), \"day\")\r\n            ? \"Today\"\r\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\r\n            ? \"Yesterday\"\r\n            : newDate.format(\"YYYY-MM-DD\"),\r\n          value: newDate,\r\n        });\r\n      }\r\n    } else if (name == \"Week\") {\r\n      let start = date.value.subtract(1, \"week\");\r\n      let end = date.endvalue.subtract(1, \"week\");\r\n\r\n      setDate({\r\n        value: start,\r\n        endvalue: end,\r\n        text: `Week ${start.week()}`,\r\n      });\r\n    } else {\r\n      let startOfMonth = date.value.subtract(1, \"month\");\r\n      let endOfMonth = date.endvalue.subtract(1, \"month\");\r\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\r\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\r\n      console.log(\"startOfMonth.month()\", startOfMonth.month());\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRightClick = () => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      let newDate = date.value;\r\n      if (newDate.isBefore(dayjs(), \"day\")) {\r\n        newDate = date.value.add(1, \"day\");\r\n        setDate({\r\n          text: newDate.isSame(dayjs(), \"day\")\r\n            ? \"Today\"\r\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\r\n            ? \"Yesterday\"\r\n            : newDate.format(\"YYYY-MM-DD\"),\r\n          value: newDate,\r\n        });\r\n      }\r\n    } else if (name == \"Week\") {\r\n      const nextWeekStart = date.value.add(1, \"week\");\r\n      const nextWeekEnd = date.endvalue.add(1, \"week\");\r\n      // 不允许超过本周\r\n      if (nextWeekStart.isAfter(dayjs().startOf(\"isoWeek\"))) {\r\n        return;\r\n      }\r\n      let str = `Week ${nextWeekStart.week()}`;\r\n\r\n      setDate({\r\n        value: nextWeekStart,\r\n        endvalue: nextWeekEnd,\r\n        text: str,\r\n      });\r\n      return;\r\n    } else {\r\n      let startOfMonth = date.value.add(1, \"month\");\r\n      let endOfMonth = date.endvalue.add(1, \"month\");\r\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\r\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\r\n\r\n      if (endOfMonth.isAfter(dayjs(), \"month\")) {\r\n        return;\r\n      }\r\n\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      isMounted.current = false;\r\n      return;\r\n    }\r\n\r\n    handleClick(date);\r\n  }, [date]);\r\n  useEffect(() => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      setDate({\r\n        value: dayjs(),\r\n        endvalue: \"\",\r\n        text: `Today`,\r\n      });\r\n    } else if (name == \"Week\") {\r\n      let start = dayjs().startOf(\"isoWeek\");\r\n\r\n      setDate({\r\n        value: start,\r\n        endvalue: dayjs().endOf(\"isoWeek\"),\r\n        text: `Week ${start.week()}`,\r\n      });\r\n    } else {\r\n      const startOfMonth = dayjs().startOf(\"month\");\r\n      const endOfMonth = dayjs().endOf(\"month\");\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  }, [name]);\r\n\r\n  return (\r\n    <div className=\"flex w-[200px] justify-between items-center\">\r\n      <div\r\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center mr-[5px] \"\r\n        onClick={handleLeftClick}\r\n      >\r\n        {\" \"}\r\n        <LeftOutlined className=\"text-white\" />\r\n      </div>\r\n      <div className=\" text-[16px] text-cblock font-semibold\">{date.text}</div>\r\n      <div\r\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center \"\r\n        onClick={handleRightClick}\r\n      >\r\n        {\" \"}\r\n        <RightOutlined className=\"text-white\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimeSelection;\r\n"],"names":["e","t","module","this","i","s","a","d","n","o","r","u","dayjs","isoWeek","weekOfYear"],"mappings":"4aAAC,SAASA,EAAEC,EAAE,CAAsDC,EAAe,QAAAD,GAAkI,GAAEE,EAAM,UAAU,CAAc,IAAIH,EAAE,MAAM,OAAO,SAASC,EAAEG,EAAEC,EAAE,CAAC,IAAIC,EAAE,SAASL,EAAE,CAAC,OAAOA,EAAE,IAAI,EAAEA,EAAE,aAAaD,CAAC,CAAC,EAAEO,EAAEH,EAAE,UAAUG,EAAE,YAAY,UAAU,CAAC,OAAOD,EAAE,IAAI,EAAE,KAAM,CAAA,EAAEC,EAAE,QAAQ,SAASN,EAAE,CAAC,GAAG,CAAC,KAAK,OAAM,EAAG,EAAEA,CAAC,EAAE,OAAO,KAAK,IAAI,GAAGA,EAAE,KAAK,QAAS,GAAED,CAAC,EAAE,IAAII,EAAEG,EAAEC,EAAEC,EAAEC,EAAEJ,EAAE,IAAI,EAAEK,GAAGP,EAAE,KAAK,YAAa,EAACG,EAAE,KAAK,GAAGC,GAAGD,EAAEF,EAAE,IAAIA,GAAI,EAAC,KAAKD,CAAC,EAAE,QAAQ,MAAM,EAAEK,EAAE,EAAED,EAAE,WAAU,EAAGA,EAAE,WAAY,EAAC,IAAIC,GAAG,GAAGD,EAAE,IAAIC,EAAET,CAAC,GAAG,OAAOU,EAAE,KAAKC,EAAE,MAAM,EAAE,CAAC,EAAEJ,EAAE,WAAW,SAAS,EAAE,CAAC,OAAO,KAAK,OAAQ,EAAC,EAAE,CAAC,EAAE,KAAK,OAAO,EAAE,KAAK,IAAI,KAAK,IAAG,EAAG,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,IAAIC,EAAED,EAAE,QAAQA,EAAE,QAAQ,SAAS,EAAEN,EAAE,CAAC,IAAIG,EAAE,KAAK,OAAM,EAAGC,EAAE,CAAC,CAACD,EAAE,EAAEH,CAAC,GAAGA,EAAE,OAAkBG,EAAE,EAAE,CAAC,IAAjB,UAAmBC,EAAE,KAAK,KAAK,KAAK,QAAQ,KAAK,WAAU,EAAG,EAAE,EAAE,QAAQ,KAAK,EAAE,KAAK,KAAK,KAAK,KAAI,EAAG,GAAG,KAAK,aAAa,GAAG,CAAC,EAAE,MAAM,KAAK,EAAEG,EAAE,KAAK,IAAI,EAAE,EAAEP,CAAC,CAAC,CAAC,CAAC,qCCMn+BW,EAAM,OAAOC,CAAO,EACpBD,EAAM,OAAOE,CAAU","x_google_ignoreList":[0]}