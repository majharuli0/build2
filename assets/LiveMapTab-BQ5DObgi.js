import{r as d,be as N,bG as w,j as s,T as C,bH as o,bF as I,bE as g,bI as _,bJ as E}from"./index-Rw8Q6r5R.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new n.Error().stack;i&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[i]="e75418da-f052-48fa-a979-55a41b463d4b",n._sentryDebugIdIdentifier="sentry-dbid-e75418da-f052-48fa-a979-55a41b463d4b")}catch{}function T({data:n={}}){var x,u,h,b,m,j,v;const{deviceData:i}=d.useContext(N),a=d.useContext(w),{elderlyDetails:t}=a||{},l=(n==null?void 0:n.device_no)||(t==null?void 0:t.deviceId),[c,p]=d.useState([]);d.useEffect(()=>{var r;const e=((r=i[l])==null?void 0:r.position)||[];p(e)},[i,l]);const f=d.useMemo(()=>{const e=i[l],r=e==null?void 0:e.hbstaticsTimestamp,y=Date.now();return!(e!=null&&e.hbstatics)||!r||(y-r)/1e3>90?null:e.hbstatics},[(x=i[l])==null?void 0:x.hbstaticsTimestamp]);return s.jsxs("div",{className:"flex gap-2 h-fit",children:[s.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(c==null?void 0:c.length)>0?s.jsx(C,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:c==null?void 0:c.map((e,r)=>s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-2 rounded-full",children:s.jsx(o,{size:14,color:"white"})}),s.jsx("div",{children:s.jsx("p",{className:"text-sm m-0",children:e==null?void 0:e.posture})})]},r)),children:s.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:c==null?void 0:c.map((e,r)=>s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-1 rounded-full border-2 border-white",children:s.jsx(o,{size:16,color:"white"})},r))})}):s.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:s.jsx(o,{size:16,color:"white"})}),s.jsx("span",{className:"font-bold text-lg",children:c?c==null?void 0:c.length:0})]}),(n==null?void 0:n.room_type)==2&&s.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit px-2 py-1",children:[s.jsx("div",{className:"pr-1",children:s.jsx(I,{size:20,color:`${(b=(h=(u=g(f))==null?void 0:u.statusEvents)==null?void 0:h.sleepState)==null?void 0:b.color}`})}),s.jsx("span",{className:"font-semibold text-wrap",children:((v=(j=(m=g(f))==null?void 0:m.statusEvents)==null?void 0:j.sleepState)==null?void 0:v.label)||"--"})]})]})}function M(){var a;const n=d.useContext(w),{elderlyDetails:i}=n||{};return s.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(i==null?void 0:i.rooms)&&((a=i==null?void 0:i.rooms)==null?void 0:a.filter(t=>t.device_no).map((t,l)=>s.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[s.jsx("h1",{className:"text-2xl font-bold",children:t==null?void 0:t.name}),s.jsxs("div",{className:"flex h-full",children:[s.jsx(T,{data:t}),s.jsxs("div",{id:"roomMap",className:"w-fit h-full mt-14 mx-auto",children:[(t==null?void 0:t.mount_type)===2&&s.jsx(_,{roomInfo:t}),(t==null?void 0:t.mount_type)===1&&s.jsx(E,{roomInfo:t})]})]})]},l)))})}export{M as default};
//# sourceMappingURL=LiveMapTab-BQ5DObgi.js.map
