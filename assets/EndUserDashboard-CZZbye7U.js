import{r as s,aj as x,u as M,al as D,bm as V,g as h,b4 as F,Y as P,j as e,C as p,b5 as Y,a1 as O,ah as B,D as Q}from"./index-DT7KcFIv.js";import{A as $,R as z,a as K}from"./alertsOverview-BNKe2tZZ.js";import"./WeeklyMonthlyPicker-dHKSd433.js";import{C as U}from"./CreateAndEditModal-DV5Cwvfv.js";import{R as W}from"./AimOutlined-BM5sCwIh.js";import{R as G}from"./HomeOutlined-BYh7hwjY.js";import"./Collapse-ujPnPzfX.js";import"./index-BPHDpZ9S.js";import"./index-B73EbW61.js";import"./CustomMultiSelector-DnLiBqBo.js";import"./leaflet-src-BOUwzzIT.js";import"./leaflet-aHoAnJ5F.js";import"./InfoCircleOutlined-DHtqhbOV.js";try{let l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new l.Error().stack;n&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[n]="7fac069c-7fbc-41af-86da-e3580aa94417",l._sentryDebugIdIdentifier="sentry-dbid-7fac069c-7fbc-41af-86da-e3580aa94417")}catch{}const{RangePicker:he}=Q;function pe(){const[l,n]=s.useState("Map View"),[y,v]=s.useState(!1),[J,X]=s.useState([]);x("activeAlert");const j=x("recentlyClosedAlert");x("events");const b=M(),[w,A]=s.useState([]),[i,S]=s.useState(1),[Z,C]=s.useState([]),[_,q]=s.useState([]),[ee,N]=s.useState(0),[E,c]=s.useState(!0),[te,se]=s.useState(null),[R,T]=s.useState(0),[d,u]=s.useState(),[a,I]=s.useState(""),[L,k]=s.useState(!1),m=s.useCallback(()=>{c(!0),D({to_date:"2024-11-30",from_date:h().format("YYYY-MM-DD"),is_resolved:!0,page:i,...V("Critical")}).then(t=>{T(t.total),c(!1),A(t.data)}).catch(t=>{c(!1),console.log(t)})},[i]);s.useEffect(()=>{m()},[m]);const f=s.useCallback(()=>{F({to_date:"2024-11-30",from_date:h().format("YYYY-MM-DD"),page:_}).then(t=>{N(t.total),t.data.length>0&&C(t.data)}).catch(t=>{console.log(t)})},[i]);s.useEffect(()=>{f()},[f]);const g=s.useCallback(()=>{if(a.trim()===""){u([]);return}P({search:a}).then(t=>{u(t==null?void 0:t.data)}).catch(t=>{console.log(t)})},[a]);s.useEffect(()=>{g()},[g]);const r=(t,o)=>{if(!o)return t;const H=new RegExp(`(${o})`,"gi");return t.replace(H,'<mark style="background-color: #80CAA7; color: white;">$1</mark>')};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 flex-col pt-8 pb-8",children:[e.jsx("div",{className:"flex item-center justify-between w-full",children:e.jsx(p,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsxs("div",{className:"w-[350px] relative",children:[e.jsx(Y,{className:"rounded-[10px]  min-w-[350px] w-full ",size:"large",placeholder:"Search Anything",style:{height:"44px"},onChange:t=>I(t.target.value),onFocus:()=>k(!0)}),L&&a.trim()!==""&&e.jsx("div",{id:"searchResult",className:"mt-3 max-h-[600px] overflow-auto rounded-lg shadow-lg bg-white border border-gray-300 absolute top-10 left-0 z-[1000] w-full",children:e.jsx("ul",{children:d==null?void 0:d.map(t=>e.jsxs("li",{className:"p-4 hover:bg-gray-100 border-b border-gray-200 cursor-pointer",onClick:()=>{b(`/supporter/elderlies/elderly-profile/${t==null?void 0:t._id}`)},children:[e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:r(t.name,a)}})}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Age:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r(t.age.toString(),a)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Address:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r(t.address||"N/A",a)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Sensitivity Factors:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r(t.diseases.join(", "),a)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Comments:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r(t.comments.map(o=>o.comment).join(", "),a)}})]})]},t._id))})})]})})}),e.jsx("div",{className:"w-full",children:e.jsx($,{refreshAlertList:m,isElderlyVisible:!0})}),e.jsxs("div",{className:"w-full flex gap-4 md:flex-row flex-col",children:[e.jsx("div",{className:"w-full  p-0 ",children:e.jsxs("div",{className:"bg-white  rounded-2xl  p-6 h-[600px]",children:[e.jsx("div",{className:"flex justify-between items-center mb-5",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Room View"})}),e.jsx(z,{ViewFor:"endUser"})]})}),e.jsx("div",{className:"bg-white w-full md:w-[48%] rounded-2xl p-6 h-[600px] overflow-hidden",children:e.jsx(K,{})})]}),e.jsxs("div",{id:"Recently_Closed_Alerts",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6",children:[e.jsxs("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Past Alerts"}),e.jsx("div",{children:e.jsx(p,{theme:{components:{Segmented:{itemSelectedBg:"#252F67",itemSelectedColor:"#fff",fontFamily:"Baloo2"}}}})})]}),e.jsx("div",{id:"Recently_Closed_Alerts_Table",className:"w-full",children:e.jsx(O.Provider,{value:{total:R,page:1,SetPage:S,limit:6},children:e.jsx(B,{loading:E,pageSize:6,tableData:w,columns:j})})})]})]}),e.jsx(U,{modalOpen:y,setModalOpen:v,type:"event"})]})}const ye=[{label:" Map View",value:"Map View",icon:e.jsx(W,{})},{label:"Room View",value:"Room View",icon:e.jsx(G,{})}],ve=[{label:"All Alerts",value:"All Alerts"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Info"}];export{ve as activeAlertSegmentOptions,ye as alertViewSegmentOptions,pe as default};
//# sourceMappingURL=EndUserDashboard-CZZbye7U.js.map
