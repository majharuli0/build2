import{r as l,bN as p,j as e,T as y,g2 as N,gr as w,bT as R}from"./index-DT7KcFIv.js";import S from"./LiveRateChart-DSGDnGTZ.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="a1fc98b5-0d56-4591-b6e3-4463f0c9df81",s._sentryDebugIdIdentifier="sentry-dbid-a1fc98b5-0d56-4591-b6e3-4463f0c9df81")}catch{}function C(){var h,b,u;const{elderlyDetails:s,sleepData:t}=l.useContext(p),d=s==null?void 0:s.deviceId,[g,x]=l.useState({time:[],heartRate:[],breathRate:[]}),[n,f]=l.useState(null),[m,v]=l.useState(Date.now()),j=a=>{const o=R(a);f(o),v(Date.now())};return l.useEffect(()=>{const a=setInterval(()=>{if(Date.now()-m>5e3)f(null),x({time:[],heartRate:[],breathRate:[]});else if(n){const r=new Date().toLocaleTimeString();x(i=>({time:[...i.time,r].slice(-30),heartRate:[...i.heartRate,n.heartRateValue].slice(-30),breathRate:[...i.breathRate,n.breathingValue].slice(-30)}))}},1e3);return()=>clearInterval(a)},[n,m]),l.useEffect(()=>{const a=new WebSocket("wss://live.elderlycareplatform.com/ws/");return a.onopen=()=>{console.log("Connected to WebSocket server")},a.onmessage=o=>{var i;const c=JSON.parse(o==null?void 0:o.data),r=(i=JSON.parse(c==null?void 0:c.message))==null?void 0:i.payload;(r==null?void 0:r.deviceCode)===d&&(r!=null&&r.heartbreath)&&j(r.heartbreath)},a.onerror=o=>{},a.onclose=()=>{console.log("Disconnected from WebSocket server")},()=>a.close()},[d]),e.jsxs("div",{className:"w-full bg-white rounded-2xl p-6 flex flex-col gap-6 h-auto",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary flex items-center gap-2",children:["Current Breathing Pattern",e.jsx(y,{title:"This feature functions only if the user is in the monitoring bed.",className:"cursor-pointer",children:e.jsx(N,{size:"18px"})})]}),e.jsx("div",{id:"LiveRate",className:"flex flex-col gap-1 pl-3 mb-2",children:e.jsxs("div",{className:"text-4xl font-bold flex items-center gap-2",style:{color:"#FFA54D"},children:[(n==null?void 0:n.breathingValue)??"--"," ",e.jsx("span",{className:"text-secondary/40",children:"BPM"}),e.jsx(w,{color:"#FFA54D",size:24})]})}),e.jsx(S,{data:g,color:"#FFA54D",type:"breathRate"}),e.jsx("div",{id:"footer",children:e.jsxs("div",{className:"flex justify-evenly items-center",children:[e.jsxs("div",{id:"avgRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsx("div",{className:"text-3xl text-primary font-bold",children:((h=t==null?void 0:t.breath_rate_vo)==null?void 0:h.avg)??"--"}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Avgerage"})]}),e.jsxs("div",{id:"minRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsxs("div",{className:"text-3xl text-primary font-bold",children:[" ",((b=t==null?void 0:t.breath_rate_vo)==null?void 0:b.min)??"--"]}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Minimum"})]}),e.jsxs("div",{id:"maxRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsxs("div",{className:"text-3xl text-primary font-bold",children:[" ",((u=t==null?void 0:t.breath_rate_vo)==null?void 0:u.max)??"--"]}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Maximum"})]})]})})]})}export{C as default};
//# sourceMappingURL=LiveBreathRate-BGDWlDyL.js.map
