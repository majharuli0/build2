{"version":3,"file":"index-IF94cXWL.js","sources":["../../src/utils/throttle.js","../../src/Pages/SupportUserDetail/index.jsx"],"sourcesContent":["let timer; let\n    flag\n/**\n * 节流原理：在一定时间内，只能触发一次\n *\n * @param {Function} func 要执行的回调函数\n * @param {Number} wait 延时的时间\n * @param {Boolean} immediate 是否立即执行\n * @return null\n */\nfunction throttle(func, wait = 500, immediate = true) {\n    if (immediate) {\n        if (!flag) {\n            flag = true\n            // 如果是立即执行，则在wait毫秒内开始时执行\n      \n            typeof func === 'function' && func()\n            timer = setTimeout(() => {\n                flag = false\n            }, wait)\n        }\n    } else if (!flag) {\n        flag = true\n        // 如果是非立即执行，则在wait毫秒内的结束处执行\n        timer = setTimeout(() => {\n            flag = false\n            typeof func === 'function' && func()\n        }, wait)\n    }\n}\nexport default throttle\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport { Space, Table, Tag, Modal } from \"antd\";\nimport { useroverViewCount } from \"@/api/AdminDashboard\";\nimport TabMenus from \"@/Components/TabMenus\";\nimport TimeSelection from \"@/Components/TimeSelection\";\nimport ls from \"store2\";\nimport AddIcon from \"@/Components/AddIcon\";\nimport Sort from \"../../Shared/sort/Sort\";\nimport { SidebarContext } from \"@/Context/CustomContext\";\nimport CustomButton from \"../../Shared/button/CustomButton\";\nimport SearchInput from \"../../Shared/Search/SearchInput\";\nimport AdminSupportAgentTable from \"@/Components/PubTable/AdminSupportAgentTable\";\n\nimport AdminFiled from \"@/Shared/AdminFiled/AdminFiled\";\n// import AdminSupportAgentTableAction from '@/Components/Admin/AdminSupportAgent/AdminSupportAgentTableAction';\nimport AdminSupportAgentTableAction from \"@/Components/PubTable/AdminSupportAgentTableAction\";\nimport { getUserPage } from \"@/api/AdminUser\";\nimport CreateAdminSupportAgent from \"@/Components/PubTable/CreateAndEditUsers\";\nimport * as SidebarContext1 from \"@/Context/CustomUsertable\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport throttle from \"@/utils/throttle\";\n\nconst AdminDashboard = () => {\n  const params = useParams();\n  let item = useLocation();\n  const [title, setTitle] = useState(\"Dashboard\");\n  const { role } = useContext(SidebarContext);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"Support Agents\");\n  const [menuName, setMenuName] = useState(\"[Nursing Home]’s Support Agents\");\n  const [btnName, setBtnName] = useState(\"Add New Support Agent\");\n  const [search, setSearch] = useState(\"\");\n  const [selected, setSelected] = useState(\"\");\n  const [modalOPen, setModalOpen] = useState(false);\n  const [page, SetPage] = useState({\n    current: 1,\n    size: 10,\n  });\n  const [menus, setMenus] = useState([\n    {\n      text: \"Support Agents\",\n      bo: true,\n      warring: false,\n    },\n  ]);\n  const [changeParams, setChangeParams] = useState({});\n  const [totle, SetTotle] = useState(0);\n  let [columns, setColumns] = useState([\n    {\n      title: \"Nursing Home\",\n      key: \"id\",\n\n      render: (row) => (\n        <button>\n          <AdminFiled data={row} />\n        </button>\n      ),\n    },\n    {\n      title: \"Contact\",\n\n      render: (row) => (\n        <button>\n          <span className=\" text-[14px] xl:text-base  font-normal text-text-secondary\">\n            {row.contactNumber}\n          </span>\n        </button>\n      ),\n    },\n\n    {\n      title: \"\",\n      key: \"id\",\n      width: 100,\n      render: (row) => (\n        // <CustomButton  >Pay now</CustomButton>\n        <AdminSupportAgentTableAction\n          getlist={() => getList(query)}\n          data={row}\n        />\n      ),\n    },\n  ]);\n  const data = [\"Time\", \"Name\"];\n  const [statistics, SetStatistics] = useState({\n    nursingHomes: 0,\n    elderlies: 0,\n    devicesConnected: 0,\n    monthlyRevenue: 0,\n  });\n  const [query, setQuey] = useState({\n    order: \"1\",\n    orderType: \"time\",\n    name: \"\",\n  });\n  const [list, SetList] = useState([]);\n  const handelOpenModal = () => {\n    setModalOpen(true);\n  };\n  const [user, SetUser] = useState(ls.get(\"user\"));\n\n  const HandleTabText = (e) => {\n    setActiveTab(e);\n    setIsModalOpen(true);\n  };\n\n  const init = () => {\n    let user = ls.get(\"user\");\n    let row = new URLSearchParams(item.search);\n    let query1 = { ...query };\n    let name = row.get(\"name\");\n    let id = row.get(\"id\");\n\n    setTitle(\"User\");\n\n    query1[name] = id;\n    query1.role = \"Support Agent\";\n    if (name == \"salesAgentId\") {\n      setChangeParams({\n        nursingHomeId: id,\n        salesAgentId: params.id,\n      });\n    }\n    if (name == \"distributorId\") {\n      setChangeParams({\n        nursingHomeId: id,\n        distributorId: params.id,\n      });\n    }\n    let role1 = role;\n    if (!role1) {\n      role1 = user.role;\n    }\n    setQuey(query1);\n    SetPage({\n      current: 1,\n      size: 10,\n    });\n  };\n  const getList = (query) => {\n    if (!query.role) return;\n    throttle(() => {\n      getUserPage({\n        ...query,\n        ...page,\n      }).then((res) => {\n        SetTotle(res.data.total);\n        SetList(res?.data?.records);\n      });\n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n  useEffect(() => {\n    getList(query);\n  }, [page]);\n  useEffect(() => {\n    if (selected && query.orderType != selected) {\n      setQuey({\n        ...query,\n        ...{\n          orderType: selected.toLowerCase(),\n          order: selected === \"Time\" ? \"1\" : \"0\",\n        },\n      });\n      SetPage({ ...page, current: 1 });\n    }\n  }, [selected]);\n  useEffect(() => {\n    SetPage({ ...page, current: 1 });\n  }, [query.order]);\n  const handBlurchange = () => {\n    setQuey({ ...query, name: search.trim() });\n    SetPage({ ...page, current: 1 });\n  };\n\n  return (\n    <div className=\"pl-[20px] pr-[50px]\">\n      <div className=\"h-[100px] flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <div className=\" text-[28px] font-semibold font-cblock \">{title}</div>\n        </div>\n        <div className=\"h-[40px] pl-[20px] pr-[20px]  rounded-[20px] bg-cblock   flex items-center \">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 14 14\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M8.65073 2.31039L11.4807 5.14035L4.31724 12.3038L1.48886 9.47387L8.65073 2.31039ZM13.6281 1.62787L12.3661 0.365808C11.8783 -0.121936 11.0863 -0.121936 10.5969 0.365808L9.38799 1.57474L12.218 4.40473L13.6281 2.99457C14.0064 2.61625 14.0064 2.00617 13.6281 1.62787ZM0.00787518 13.4516C-0.0436269 13.6834 0.165643 13.8911 0.397455 13.8347L3.551 13.0701L0.722618 10.2401L0.00787518 13.4516Z\"\n              fill=\"white\"\n            />\n          </svg>\n          <div className=\"pl-[20px]  text-white text-[14px] font-semibold  \">\n            Edit Nursing Home\n          </div>\n        </div>\n      </div>\n      <div className=\"pt-[20px] pb-[10px] flex\">\n        <TabMenus\n          menus={menus}\n          activeTab={activeTab}\n          setActiveTab={setActiveTab}\n        />\n      </div>\n      <div className=\"\">\n        {(activeTab == \"Support Agents\" || activeTab == \"Nursing Homes\") && (\n          <div>\n            <div className=\" bg-white rounded-2xl\">\n              <div className=\" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2\">\n                <div className=\" flex items-center justify-between w-full\">\n                  <h2 className=\" text-2xl font-bold text-text-primary\">\n                    {menuName}\n                  </h2>\n                </div>\n                <div className=\" flex items-center justify-end gap-5 w-full\">\n                  {/* =====Search sort and add admin button===== */}\n                  <SearchInput\n                    search={search}\n                    setSearch={setSearch}\n                    handBlurchange={handBlurchange}\n                    placeholder=\"Search Nursing Home\"\n                  />\n                  <Sort\n                    query={query}\n                    setQuey={setQuey}\n                    selected={selected}\n                    setSelected={setSelected}\n                    data={data}\n                  />\n                  <CustomButton\n                    onClick={() => handelOpenModal()}\n                    className={\" hidden lg:flex min-w-[80px]\"}\n                  >\n                    <AddIcon /> {btnName}\n                  </CustomButton>\n                </div>\n              </div>\n\n              <div className=\" grid grid-cols-1\">\n                <SidebarContext1.SidebarContext.Provider\n                  value={{ getlist: getList, query, totle, page, SetPage }}\n                >\n                  <AdminSupportAgentTable tableData={list} columns={columns} />\n                </SidebarContext1.SidebarContext.Provider>\n              </div>\n            </div>\n            <CreateAdminSupportAgent\n              item={{}}\n              changeParams={changeParams}\n              getlist={() => getList(query)}\n              role={query.role}\n              modalOPen={modalOPen}\n              setModalOpen={setModalOpen}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"names":["flag","throttle","func","wait","immediate","AdminDashboard","params","useParams","item","useLocation","title","setTitle","useState","role","useContext","SidebarContext","activeTab","setActiveTab","menuName","setMenuName","btnName","setBtnName","search","setSearch","selected","setSelected","modalOPen","setModalOpen","page","SetPage","menus","setMenus","changeParams","setChangeParams","totle","SetTotle","columns","setColumns","row","jsx","AdminFiled","AdminSupportAgentTableAction","getList","query","data","setQuey","list","SetList","handelOpenModal","ls","init","user","query1","name","id","role1","getUserPage","res","_a","useEffect","handBlurchange","jsxs","TabMenus","SearchInput","Sort","CustomButton","AddIcon","SidebarContext1.SidebarContext","AdminSupportAgentTable","CreateAdminSupportAgent"],"mappings":"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"}